!function(){"use strict";function e(e){e.defaults.xsrfHeaderName="X-CSRFToken",e.defaults.xsrfCookieName="csrftoken"}function t(e,t,a){e.$on("$stateChangeStart",function(n,o,r){var s=o.data.requireLogin,c=a.isAuthAcct();if(s&&!c)return n.preventDefault(),t.go("login"),e})}angular.module("hga",["ngAnimate","ngTouch","ngSanitize","ngCookies","ngFileUpload","ngAudio","angularMoment","monospaced.elastic","ui.router","ui.bootstrap","ui.select","mwl.calendar","hga.config","hga.routes","main","users","forum","schedule"]),angular.module("hga.config",["ui.router"]),angular.module("hga.routes",["ui.router.router"]),angular.module("hga").run(e),e.$inject=["$http"],angular.module("hga").run(t),t.$inject=["$rootScope","$state","Main"]}(),function(){"use strict";function e(e,t,a){a.interceptors.push("tokenInterceptor"),t.caseInsensitive(!0),t.strictMode(!1)}angular.module("hga.config").config(e),e.$inject=["$locationProvider","$urlMatcherFactoryProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){t.otherwise(function(e){var t=e.get("$state");t.go("app.dashboard")}),e.state("app",{abstract:!0,url:"/app",controller:"AppController",controllerAs:"vm",templateUrl:static_path("views/main/app.html"),data:{requireLogin:!0}}).state("app.dashboard",{url:"/dashboard/:userId",controller:"DashBoardController",controllerAs:"vm",templateUrl:static_path("views/main/dashboard.html"),data:{requireLogin:!0}}).state("app.leaderboard",{url:"/leaderboard/:userId",controller:"LeaderBoardController",controllerAs:"vm",templateUrl:static_path("views/main/leaderboard.html"),data:{requireLogin:!0}}).state("app.profile",{url:"/profile/:userId",controller:"UserProfileController",controllerAs:"vm",templateUrl:static_path("views/users/user-profile.html"),data:{requireLogin:!0}}).state("app.student-goal",{url:"/student-goals/:userId",controller:"StudentGoalController",controllerAs:"vm",templateUrl:static_path("views/users/student-goal.html"),data:{requireLogin:!0}}).state("app.student-objective",{url:"/student-objectives/:userId",controller:"StudentObjectiveController",controllerAs:"vm",templateUrl:static_path("views/users/student-objective.html"),data:{requireLogin:!0}}).state("app.student-practice",{url:"/student-practice/:userId",controller:"StudentPracticeController",controllerAs:"vm",templateUrl:static_path("views/users/student-practice.html"),data:{requireLogin:!0}}).state("app.student-wishlist",{url:"/student-wishlist/:userId",controller:"StudentWishListController",controllerAs:"vm",templateUrl:static_path("views/users/student-wishlist.html"),data:{requireLogin:!0}}).state("app.student-materials",{url:"/student-materials/:userId",controller:"StudentMaterialsController",controllerAs:"vm",templateUrl:static_path("views/users/student-materials.html"),data:{requireLogin:!0}}).state("app.forum",{url:"/forum",controller:"ForumController",controllerAs:"vm",templateUrl:static_path("views/forum/forum.html"),data:{requireLogin:!0}}).state("app.schedule",{url:"/schedule",controller:"ScheduleController",controllerAs:"vm",templateUrl:static_path("views/schedule/schedule.html"),data:{requireLogin:!0}}).state("login",{url:"/login",controller:"AuthenticationController",controllerAs:"vm",templateUrl:static_path("views/main/login.html"),data:{requireLogin:!1}}).state("logout",{url:"/logout",controller:"LogoutController",controllerAs:"vm",data:{requireLogin:!0}})}angular.module("hga.routes").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("forum",["forum.controllers","forum.services","forum.directives"]),angular.module("forum.controllers",[]),angular.module("forum.services",[]),angular.module("forum.directives",[])}(),function(){"use strict";angular.module("main",["main.controllers","main.services","main.directives","main.filters"]),angular.module("main.controllers",[]),angular.module("main.services",[]),angular.module("main.directives",[]),angular.module("main.filters",[])}(),function(){"use strict";angular.module("users",["users.controllers","users.services","users.directives"]),angular.module("users.controllers",[]),angular.module("users.services",[]),angular.module("users.directives",[])}(),function(){"use strict";angular.module("schedule",["schedule.controllers","schedule.services","schedule.directives"]),angular.module("schedule.controllers",[]),angular.module("schedule.services",[]),angular.module("schedule.directives",[])}(),function(){"use strict";function e(e,t,a,n,o,r){function s(){if(n.isAuthAcct()){var e=n.getAuthAcct();r.getUser(e.id).then(function(e){u.user=e}).catch(function(e){n.logout()}),o.getAllCategories().then(c).catch(i)}else console.log("Could not get account")}function c(e){u.categories=e}function i(e){console.log(e)}var u=this;u.discussionClass="",s(),u.setCategory=function(e){u.discussionClass="animate fadeOutDown",u.category=e,u.discussionClass="animate fadeInDown"}}angular.module("forum.controllers").controller("ForumController",e),e.$inject=["$scope","$sce","$state","Main","Forum","Users"]}(),function(){"use strict";function e(e,t,a,n,o,r){var s={restrict:"EA",scope:{category:"=",userId:"=",path:"=",playLevelColor:"=",discussionClass:"="},link:function(a,s,c){function i(e){a.category.category_topic.push(e),a.getMessages(e.id)}function u(e){console.log(e)}function l(e){a.messages=e,a.messageClass="animated fadeInRight"}function d(e){console.log(e)}a.newMessage={},a.authAcct=t.getObject("authAcct"),a.open=function(t){o.open({templateUrl:e.trustAsResourceUrl(static_path("views/modals/forum-topic.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(e,t,n){var o=this;o.closeModal=function(){t.dismiss("cancel")},o.addNewTopic=function(e){a.addTopic(e),t.close()}}],controllerAs:"vm",size:"lg"})},a.addTopic=function(e){e.category_id=a.category.id,n.addNewTopic(e).then(i).catch(u)},a.getMessages=function(e){a.messageClass="animated fadeOutLeft",n.getAllMessages(e).then(l).catch(d)},a.addMessage=function(e,t){var n={message:e.message,topic_id:t,message_file:e.message_file};r.upload({url:"api/v1/forum-message/",data:n}).then(function(e){a.newMessage={},a.messages.topic_message.push(e.data)},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);a.fileProgress=t,console.log("progress: "+t+"% "+e.config.data.message_file.name)})},a.$watch("category",function(e){e&&(a.messages="")},!0)},templateUrl:e.trustAsResourceUrl(static_path("views/directives/forum-discussion.directive.html"))};return s}angular.module("forum.directives").directive("forumDiscussion",e),e.$inject=["$sce","$cookies","Users","Forum","$uibModal","Upload"]}(),function(){"use strict";function e(e,t,a,n){function o(e){return e.data}function r(e){return t.reject("Error "+e.status)}function s(){return e.get("api/v1/forum-topics/").then(o).catch(r)}function c(){return e.get("api/v1/forum-category/").then(o).catch(r)}function i(t){return e.get("api/v1/forum-topics/"+t+"/",t).then(o).catch(r)}function u(t){return e.post("api/v1/forum-message/",t).then(o).catch(r)}function l(t){return e.post("api/v1/forum-topics/",t).then(o).catch(r)}var d=this;d.acct=n.getObject("authAcct");var h={getAllTopics:s,getAllCategories:c,getAllMessages:i,addNewMessage:u,addNewTopic:l};return h}angular.module("forum.services").factory("Forum",e),e.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function e(e,t,a,n,o){function r(){n.isAuthAcct().then(function(e){s.authAcct=n.getAuthAcct(),o.getUser(s.authAcct.id).then(function(e){s.currentUser=e}).catch(function(e){n.logout()})}).catch(function(e){console.log(e),n.logout()})}var s=this;s.sidebarToggled=!1,e.$on("update_user_info",function(e,t){s.authAcct.id==t.id&&(s.currentUser=t)});var c=media_path(""),i=static_path("");e.path={static_files:t.trustAsResourceUrl(i),media:t.trustAsResourceUrl(c)},e.playLevelColor={1:"bg-white",2:"bg-red",3:"bg-yellow",4:"bg-green",5:"bg-blue",6:"bg-purple",7:"bg-brown",8:"bg-black"},s.toggleSidebar=function(){s.sidebarToggled=!s.sidebarToggled},r()}angular.module("main.controllers").controller("AppController",e),e.$inject=["$scope","$sce","$state","Main","Users"]}(),function(){"use static";function e(e,t,a,n,o,r,s){function c(){r.isAuthAcct()&&(h.authUser=r.getAuthAcct(),a.go("app.dashboard",{userId:h.authUser.id}))}function i(e){a.go("app.dashboard",{userId:e.id})}function u(e){console.log(e),h.loginError=e.data.message}function l(t){$.notify({icon:"ti-check",message:"Account has been created! Pending activation from Hirsch Guitar Academy. You will receive an email upon activation."},{type:"warning",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">Ã—</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}),e.isCollapsed=!1,e.registerForm.$setPristine(),h.newUser={},a.go("login")}function d(e){console.log(e),500===e.status?h.registerError="username or email in use":h.registerError=e.data.message}var h=this;h.dateReg=/^(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,c(),h.goToSignup=function(){$("html, body").animate({scrollTop:$("#signup").offset().top},300)},h.login=function(e,t){h.loginError&&(h.loginError=""),r.login(e,t).then(i).catch(u)},h.register=function(e){e.password===e.confirm_password?r.register(e).then(l).catch(d):h.registerError="Passwords must match!"};var f=media_path(""),p=static_path("");e.path={static_files:t.trustAsResourceUrl(p),media:t.trustAsResourceUrl(f)}}angular.module("main.controllers").controller("AuthenticationController",e),e.$inject=["$scope","$sce","$state","$location","$anchorScroll","Main","Users"]}(),function(){"use static";function e(e,t,a,n,o){function r(){n.isAuthAcct()?(u.authAcct=n.getAuthAcct(),a.userId&&u.authAcct.is_staff?u.dashId=a.userId:(u.dashId=u.authAcct.id,t.transitionTo("app.dashboard",{userId:u.dashId},{notify:!1})),s(u.dashId)):t.go("login")}function s(e){o.getUser(e).then(c).catch(i)}function c(e){u.user=e}function i(e){console.log(e),n.logout()}var u=this;u.timerVis=!1,r()}angular.module("main.controllers").controller("DashBoardController",e),e.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function e(e,t,a,n,o){function r(){n.isAuthAcct()?(u.authAcct=n.getAuthAcct(),a.userId&&u.authAcct.is_staff?u.dashId=a.userId:(u.dashId=u.authAcct.id,t.transitionTo("app.leaderboard",{userId:u.dashId},{notify:!1})),s(u.dashId)):t.go("login")}function s(e){o.getUser(e).then(c).catch(i)}function c(e){u.user=e}function i(e){console.log(e),n.logout()}var u=this;r()}angular.module("main.controllers").controller("LeaderBoardController",e),e.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function e(e,t){function a(){t.isAuthAcct()?t.logout():e.go("login")}a()}angular.module("main.controllers").controller("LogoutController",e),e.$inject=["$state","Main"]}(),function(){"use strict";function e(e,t,a,n){var o={restrict:"EA",scope:{path:"="},link:function(e,o,r){function s(){e.twelve=[],e.sixty=[];for(var t=0;t<60;t++)e.sixty.push(t);for(var a=0;a<=12;a++)e.twelve.push(a);var n=angular||{},o=navigator.userAgent;n.ff=o.indexOf("Firefox")!=-1,n.chr=o.indexOf("Chrome")!=-1,n.saf=o.indexOf("Safari")!=-1&&!n.chr,n.saf&&(e.metAlert="For best results use Metronome in Google Chrome or FireFox")}function c(){var a=e.oneMin/e.bpm;e.metTimeoutId=t(c,a),l(),e.beatCount++,e.beatCount>e.bpb&&(e.beatCount=1),1==e.beatCount?u():i()}function i(){e.tock.stop(),e.tick.play()}function u(){e.tick.stop(),e.tock.play()}function l(){var t=1/(e.bpm/60);e.left?(e.beatReset=!1,e.beatRight=!1,e.beatLeft=!0,e.beatBarStyle={"-webkit-transition":"all "+t+"s ease-in-out","-moz-transition":"all "+t+"s ease-in-out","-o-transition":"all "+t+"s ease-in-out",transition:"all "+t+"s ease-in-out"},e.left=0):(e.beatReset=!1,e.beatLeft=!1,e.beatRight=!0,e.left++)}function d(){e.beatRight=!1,e.beatLeft=!1,e.beatReset=!0}function h(){p=a(function(){f()},1e3)}function f(){0==e.seconds?(e.seconds=59,0==e.minutes?(e.minutes=59,e.hours>0&&e.hours--):1==e.minutes?e.minutes=0:e.minutes>1&&e.minutes--):1==e.seconds&&0==e.minutes&&0==e.hours?(e.seconds=0,e.stop()):e.seconds>=1&&e.seconds--}var p;e.seconds=0,e.minutes=0,e.hours=0,e.running=!1;var m=static_path("sounds/tick.mp3"),g=static_path("sounds/tock.mp3");e.tick=n.load(m),e.tock=n.load(g),e.metTimeoutId=0,e.timeoutClearId=0,e.oneMin=6e4,e.bpm=100,e.bpb=4,e.beatCount=1,e.left=1,e.turnedOn=!1,e.bpmPlus=function(t){var a=parseFloat(t);e.bpm=parseFloat(a+1)},e.bpmMinus=function(t){var a=parseFloat(t);e.bpm=parseFloat(a-1)},e.bpbPlus=function(t){var a=parseFloat(t);e.bpb=parseFloat(a+1)},e.bpbMinus=function(t){var a=parseFloat(t);e.bpb=parseFloat(a-1)},e.startMet=function(){return!e.turnedOn&&(e.beatCount=1,c(),void(e.turnedOn=!0))},e.stopMet=function(){t.cancel(e.metTimeoutId),e.beatCount=1,d(),e.turnedOn=!1},e.setTime=function(){e.setHours>0?e.hours=e.setHours:e.hours=0,e.setMinutes>0?e.minutes=e.setMinutes:e.minutes=0,e.seconds=0},e.stop=function(){a.cancel(p),e.running=!1},e.start=function(){0==e.seconds&&0==e.minutes&&0==e.hours&&e.setTime(),h(),e.running=!0},e.clear=function(){e.hours=0,e.seconds=0,e.minutes=0},s()},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/stopwatch.directive.html"))}};return o}angular.module("main.directives").directive("stopWatch",e),e.$inject=["$sce","$timeout","$interval","ngAudio"]}(),function(){"use strict";function e(e,t,a,n,o,r){var s={restrict:"EA",scope:{tempType:"=",userId:"=",goals:"="},link:function(o,s,c){o.sortType=["goal_complete","goal_target_date"],o.sortReverse=!1,o.searchItem="",o.open=function(t){n.open({templateUrl:e.trustAsResourceUrl(static_path("views/modals/student-goal.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(e,a,n){var r=this;t.id?(r.modalTitle="Update Goal",r.studentGoal=t):(r.modalTitle="New Goal",r.studentGoal={}),r.openDate=function(e){e.preventDefault(),e.stopPropagation(),n(function(){r.showPicker.opened=!r.showPicker.opened})},r.showPicker={opened:!1},r.closeModal=function(){a.dismiss("cancel")},r.submitGoal=function(e){if(t.id)o.updateGoal(e);else{var n=o.userId;o.addGoal(n,e)}a.close()}}],controllerAs:"vm",size:"lg"})},o.updateGoal=function(e){var a=e.id;if(e.goal)var n={id:e.id,goal:e.goal,goal_target_date:e.goal_target_date,goal_complete:e.goal_complete,goal_notes:e.goal_notes};else{var n=e,r=o.getDate();n.goal_complete_date=r.now}t.updateStudentGoal(a,n).then(function(t){var a=o.goals.indexOf(e);o.goals[a]=t}).catch(function(e){console.log(e)})},o.getDate=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear(),o=e.getHours(),r=e.getMinutes(),s=e.getSeconds(),c=n+"-"+a+"-"+t+"T"+o+":"+r+":"+s;return{today:e,dd:t,mm:a,yyyy:n,hh:o,m:r,secs:s,now:c}},o.addGoal=function(e,a){a.student=e,t.createStudentGoal(a).then(function(e){o.goals.push(e)}).catch(function(e){console.log(e)})},o.deleteGoal=function(e){var a=e.id;t.deleteStudentGoal(a).then(function(t){var a=o.goals.indexOf(e);o.goals.splice(a,1)}).catch(function(e){console.log(e)})},o.checkGoals=function(){o.$watch("goals",function(e){if(e){var t=new Date,n=new Date;n.setDate(n.getDate()+7);var o=a.getAuthAcct();if(o.notification.goal){var s=!1;if(o.notification.goal_time>n)var s=!0}if(s||!o.notification.goal){var c;if(angular.forEach(e,function(e,t){e.goal_target_date&&!e.goal_complete&&(c?e.goal_target_date<c&&(c=e.goal_target_date):c=e.goal_target_date)}),c){var i=new Date;i.setDate(i.getDate()+7);var u=new Date(c);t>u?$.notify({icon:"ti-medall",message:"You have Goals that are past the Target Date!"},{type:"danger",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">Ã—</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}):i>u&&$.notify({icon:"ti-medall",message:"You have Goals that are approaching Target Date!"},{type:"warning",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">Ã—</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}),o.notification={goal:!0,goal_time:t},r.putObject("authAcct",o)}}}},!0)},o.checkGoals()},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-goal-"+a.tempType+".directive.html"))}};return s}angular.module("main.directives").directive("studentGoal",e),e.$inject=["$sce","Users","Main","$uibModal","$timeout","$cookies"]}(),function(){"use strict";function e(e){var t={restrict:"EA",scope:{labels:"=",filterLabels:"="},link:function(e,t,a){function n(){angular.forEach(e.labels,function(t,a){_.some(e.allLabels,function(e){return e.id==t.id})||e.allLabels.push(t)})}e.allLabels=[],e.addLabel=function(t){e.filterLabels.push(t.label_name)},e.removeLabel=function(t){e.filterLabels.splice(t,1)},e.$watch("labels",function(e,t){e&&n()},!0)},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-label-display.directive.html"))}};return t}angular.module("main.directives").directive("studentLabelDisplay",e),e.$inject=["$sce"]}(),function(){"use strict";function e(e,t){var a={restrict:"EA",scope:{itemLabel:"="},link:function(e,a,n){function o(){t.getAllLabels().then(r).catch(function(e){console.log(e)})}function r(t){e.allLabels=t}e.createLabel=function(e){var t={label_name:e,label_new:!0};return t},e.addLabel=function(t){delete t.$$hashKey,delete t.isTag,e.itemLabel.push(t)},e.removeLabel=function(t){var a=e.itemLabel.indexOf(t);e.itemLabel.splice(a,1)},o()},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-label.directive.html"))}};return a}angular.module("main.directives").directive("studentLabel",e),e.$inject=["$sce","Users"]}(),function(){"use strict";function e(e,t,a,n){var o={restrict:"EA",scope:{tempType:"=",userId:"=",playLevelColor:"=",path:"=",authAcct:"="},link:function(e,t,o){function r(){a.getUserLeaderBoard().then(c).catch(i),e.getRange("all")}function s(e,t){_.findWhere(t,{id:parseInt(e)})}function c(t){e.allUsers=t,s(e.userId,e.allUsers),e.leaderUsers=angular.copy(t),e.setLeaderboard(e.leaderUsers),u(e.allUsers.length),e.loading=!1}function i(e){console.log(e)}function u(t){e.pageSet={viewby:"10",totalItems:t,currentPage:1,itemsPerPage:"10",maxSize:5}}e.loading=!0,e.showInactive="",e.lb={searchItem:""},e.setItemsPerPage=function(t){e.pageSet.itemsPerPage=t,e.pageSet.currentPage=1},e.dateRange=moment("12-25-1995","MM-DD-YYYY"),e.setLeaderboard=function(t){if(e.tempLeaderBoard=[],angular.forEach(t,function(t,a){if(t.student_log.length)if(t.student_log=_.filter(t.student_log,function(t){if(t.practice_date)return moment(t.practice_date).isAfter(e.dateRange)}),t.student_log.length)var n=e.getSum(t.student_log);else var n={max_speed:0,speed_total:0,speed_avg:0,time_total:0,time_avg:0,last_practice:"no practice"};else var n={max_speed:0,speed_total:0,speed_avg:0,time_total:0,time_avg:0,last_practice:"no practice"};if(t.student_goal.length)if(t.student_goal=_.filter(t.student_goal,function(t){return moment(t.goal_complete_date).isAfter(e.dateRange)}),t.student_goal.length)var o=_.where(t.student_goal,{goal_complete:!0}).length;else var o=0;else var o=0;if(t.student_objective.length)if(t.student_objective=_.filter(t.student_objective,function(t){return moment(t.objective_complete_date).isAfter(e.dateRange)}),t.student_objective.length)var r=_.where(t.student_objective,{objective_complete:!0}).length;else var r=0;else var r=0;if(t.student_wishlist.length)if(t.student_wishlist=_.filter(t.student_wishlist,function(t){return moment(t.wish_item_complete_date).isAfter(e.dateRange)}),t.student_wishlist.length)var s=_.where(t.student_wishlist,{wish_item_complete:!0}).length;else var s=0;else var s=0;var c={id:t.id,is_active:t.is_active,first_name:t.first_name,last_name:t.last_name,play_level:t.play_level,practice_speed_high:n.max_speed,practice_speed_avg:n.speed_avg,practice_speed_total:n.speed_total,practice_time_avg:n.time_avg,practice_time_total:n.time_total,practice_count:t.student_log.length,last_practice_date:n.last_practice,goals_complete:o,objectives_complete:r,wishes_complete:s};e.tempLeaderBoard.push(c),e.userId===c.id&&(e.leaderBoardUser=c)}),e.leaderBoard=_.sortBy(e.tempLeaderBoard,"practice_time_total").reverse(),e.leaderBoardUser){var a=e.leaderBoard.indexOf(e.leaderBoardUser);0===a?(e.leaderBoard[a].rank=a+1,e.leaderBoard[a+1].rank=a+2,e.leaderBoard[a+2].rank=a+3,e.dashLeader=[e.leaderBoard[a],e.leaderBoard[a+1],e.leaderBoard[a+2]]):a===e.leaderBoard.length-1?(e.leaderBoard[a-2].rank=a-1,e.leaderBoard[a-1].rank=a,e.leaderBoard[a].rank=a+1,e.dashLeader=[e.leaderBoard[a-2],e.leaderBoard[a-1],e.leaderBoard[a]]):(e.leaderBoard[a-1].rank=a,e.leaderBoard[a].rank=a+1,e.leaderBoard[a+1].rank=a+2,e.dashLeader=[e.leaderBoard[a-1],e.leaderBoard[a],e.leaderBoard[a+1]])}},e.getSum=function(e){var t=[],a=[],n=[],o=0,r="";if(angular.forEach(e,function(e,s){if(e.practice_time){var c={},i=parseInt(e.practice_time);if(t.push(i),n.length){var u=_.findWhere(n,{date:e.practice_date});u?u.tot=parseInt(u.tot)+i:(c.tot=i,c.date=e.practice_date,n.push(c))}else c.tot=i,c.date=e.practice_date,n.push(c)}if(e.practice_speed){var l=parseInt(e.practice_speed);l>o&&(o=l),a.push(l)}e.practice_date&&e.practice_date>r&&(r=e.practice_date)}),t.length)var s=t.reduce(function(e,t){return e+t});else var s=0;if(a.length)var c=a.reduce(function(e,t){return e+t});else var c=0;if(n.length){var i=0;_.each(n,function(e,t){i+=e.tot})}else var i=0;return{max_speed:o,speed_total:c,speed_avg:c/a.length,time_total:s,time_avg:i/n.length,last_practice:r}},e.resetLeaderboard=function(){e.dateRange=moment("12-25-1995","MM-DD-YYYY");var t=angular.copy(e.allUsers);e.setLeaderboard(t)},e.getRange=function(t){if(e.rangeBy=t,"all"===e.rangeBy)e.resetLeaderboard();else{e.adjDate=moment().subtract(1,t),e.dateRange=e.adjDate;var a=angular.copy(e.allUsers);e.setLeaderboard(a)}},n(function(){r()},1e3)},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-leaderboard-"+a.tempType+".directive.html"))}};return o}angular.module("main.directives").directive("studentLeaderboard",e),e.$inject=["$sce","$cookies","Users","$timeout"]}(),function(){"use strict";function e(e,t,a,n,o,r){var s={restrict:"EA",scope:{tempType:"=",userId:"=",materials:"=",path:"="},link:function(r,s,c){function i(e){angular.forEach(e,function(e,t){var a=_.findWhere(e.student_material_item,{student:r.userId});a&&!r.authAcct.is_admin&&(e.material_added=a.student_added),e.material_label.length&&angular.forEach(e.material_label,function(e,t){r.materialLabelsAll.indexOf(e)==-1&&r.materialLabelsAll.push(e)})})}function u(e){var t=r.materials.indexOf(r.mat);r.materials.splice(t,1)}r.sortType=["-material_added"],r.sortReverse=!1,r.searchItem="",r.authAcct=t.getObject("authAcct"),r.materialLabelsAll=[],r.filterLabels=[],r.open=function(t){n.open({templateUrl:e.trustAsResourceUrl(static_path("views/modals/student-materials.modal.html")),controller:["$scope","$uibModalInstance",function(e,n){var o=this;o.path=r.path,o.authAcct=r.authAcct,o.hasGroup=!1,o.fileProgress=r.fileProgress,t.id?(o.modalTitle="Update Material",o.newMaterial=t,t.student_group.length&&(o.hasGroup=!0,r.hasGroup=o.hasGroup)):(o.modalTitle="Add Material",o.newMaterial={},o.newMaterial.material_label=[]),r.authAcct.is_staff&&a.getAllSimpleUsers().then(function(e){o.allUsers=e}),o.closeModal=function(){n.dismiss("cancel")},o.submitMaterial=function(e){if(e.student_group){var a=!0;e.student_group.length>=1&&e.student_group[0].email?e.group_student=_.pluck(_.clone(e.student_group),"id"):e.group_student=_.clone(e.student_group),e=_.omit(e,"student_group")}t.id?r.updateMaterial(e):(a?e.student=r.authAcct.id:e.student=r.userId,r.addMaterial(e)),n.close()}}],controllerAs:"vm",size:"lg"})},r.updateMaterial=function(e){var t=_.omit(e,"material_added_by","material_updated_by","student"),a=e.id,n=t;o.upload({url:"api/v1/student-materials/"+a+"/",data:n,method:"PUT"}).then(function(t){var a=r.materials.indexOf(e);r.materials[a]=t.data},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);r.fileProgress=t})},r.addMaterial=function(e){o.upload({url:"api/v1/student-materials/",data:e,method:"POST"}).then(function(e){r.materials.push(e.data)},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);r.fileProgress=t,console.log("progress: "+t+"% "+e.config.data.file.name)})},r.deleteMaterial=function(e){var t=e.id;if(r.mat=e,e.student_group.length>1&&!r.authAcct.is_staff){var n=_.clone(e);n.group_student=_.without(_.pluck(n.student_group,"id"),r.userId),n=_.omit(n,"student_group"),r.updateMaterial(n),u()}else a.deleteStudentMaterial(t).then(u).catch(function(e){console.log(e)})},r.$watch("materials",function(e,t){e&&i(r.materials)},!0)},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-materials-"+a.tempType+".directive.html"))}};return s}angular.module("main.directives").directive("studentMaterials",e),e.$inject=["$sce","$cookies","Users","$uibModal","Upload","$timeout"]}(),function(){"use strict";function e(e,t,a){var n={restrict:"EA",scope:{tempType:"=",userId:"=",authAcct:"=",objectives:"="},link:function(n,o,r){n.sortType=["objective_complete","objective_created"],n.sortReverse=!1,n.searchItem="",n.open=function(t){a.open({templateUrl:e.trustAsResourceUrl(static_path("views/modals/student-objective.modal.html")),controller:["$scope","$uibModalInstance",function(e,a){var o=this;t.id?(o.modalTitle="Update Objective",o.studentObjective=t):(o.modalTitle="New Objective",o.studentObjective={}),o.closeModal=function(){a.dismiss("cancel")},o.submitObjective=function(e){if(t.id)n.updateObjective(e);else{var o=n.userId;n.addObjective(o,e)}a.close()}}],controllerAs:"vm",size:"lg"})},n.updateObjective=function(e){var a=e.id;if(e.objective)var o={id:e.id,objective:e.objective,objective_complete:e.objective_complete,objective_notes:e.objective_notes,objective_priority:e.objective_priority,objective_visible:e.objective_visible};else{var o=e,r=n.getDate();o.objective_complete_date=r.now}t.updateStudentObjective(a,o).then(function(t){var a=n.objectives.indexOf(e);n.objectives[a]=t}).catch(function(e){console.log(e)})},n.getDate=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear(),o=e.getHours(),r=e.getMinutes(),s=e.getSeconds(),c=n+"-"+a+"-"+t+"T"+o+":"+r+":"+s;return{today:e,dd:t,mm:a,yyyy:n,hh:o,m:r,secs:s,now:c}},n.addObjective=function(e,a){a.student=e,t.createStudentObjective(a).then(function(e){n.objectives.push(e)}).catch(function(e){console.log(e)})},n.deleteObjective=function(e){var a=e.id;t.deleteStudentObjective(a).then(function(t){var a=n.objectives.indexOf(e);n.objectives.splice(a,1)}).catch(function(e){console.log(e)})}},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-objective-"+a.tempType+".directive.html"))}};return n}angular.module("main.directives").directive("studentObjective",e),e.$inject=["$sce","Users","$uibModal"]}(),function(){"use strict";function e(e,t,a,n){var o={restrict:"EA",scope:{tempType:"=",userId:"=",practiceLogs:"=",timerVis:"="},link:function(o,r,s){o.sortType=["practice_item_created"],o.sortReverse=!1,o.searchItem="",o.open=function(t){a.open({templateUrl:e.trustAsResourceUrl(static_path("views/modals/student-practice.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(e,a,n){var r=this;t.id?(r.modalTitle="Update Practice",r.newPracticeLog=t):(r.modalTitle="New Practice",r.newPracticeLog={}),r.openDate=function(e){e.preventDefault(),e.stopPropagation(),n(function(){r.showPicker.opened=!r.showPicker.opened})},r.showPicker={opened:!1},r.closeModal=function(){a.dismiss("cancel")},r.submitNewPracticeLog=function(e){if(t.id)o.updatePracticeLog(e);else{var n=o.userId;o.addPracticeLog(n,e)}a.close()}}],controllerAs:"vm",size:"lg"})},o.updatePracticeLog=function(e){var a=_.omit(e,"practice_item_created");t.updateStudentPracticeLog(a).then(function(t){o.pracLog=_.findWhere(o.practiceLogs,{id:e.id}),o.pracLog.practice_category_display=t.practice_category_display,o.getStats()}).catch(function(e){console.log(e)})},o.addPracticeLog=function(e,a){a.student=e,t.createStudentPracticeLog(a).then(function(e){o.practiceLogs.push(e),o.getStats()}).catch(function(e){console.log(e)})},o.deletePracticeLog=function(e){var a=e.id;t.deleteStudentPracticeLog(a).then(function(t){var a=o.practiceLogs.indexOf(e);o.practiceLogs.splice(a,1),o.getStats()}).catch(function(e){console.log(e)})},o.getStats=function(){n(function(){var e=[],t=[];o.maxSpeed=0,o.practiceLogs&&o.practiceLogs.length?angular.forEach(o.practiceLogs,function(a,n){if(a.practice_time){var r=parseInt(a.practice_time);e.push(r)}if(a.practice_speed){var s=parseInt(a.practice_speed);s>o.maxSpeed&&(o.maxSpeed=s),t.push(s)}}):(e.push(0),t.push(0)),o.sumTimes=e.reduce(function(e,t){return e+t}),o.sumSpeeds=t.reduce(function(e,t){return e+t})},1e3)},o.getStats()},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-practice-"+a.tempType+".directive.html"))}};return o}angular.module("main.directives").directive("studentPracticeLog",e),e.$inject=["$sce","Users","$uibModal","$timeout"]}(),function(){"use strict";function e(e,t,a){var n={restrict:"EA",scope:{tempType:"=",userId:"=",wishLists:"="},link:function(n,o,r){n.sortType=["wish_item_complete","wish_item_created"],n.sortReverse=!1,n.searchItem="",n.open=function(t){a.open({templateUrl:e.trustAsResourceUrl(static_path("views/modals/student-wishlist.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(e,a,o){var r=this;t.id?(r.modalTitle="Update Wish",r.newWishItem=t):(r.modalTitle="New Wish",r.newWishItem={}),r.closeModal=function(){a.dismiss("cancel")},r.submitWishItem=function(e){if(t.id)n.updateWishItem(e);else{var o=n.userId;n.addWishItem(o,e)}a.close()}}],controllerAs:"vm",size:"lg"})},n.updateWishItem=function(e){var a=e.id;if(e.wish_item)var o={id:e.id,wish_item:e.wish_item,wish_item_complete:e.wish_item_complete,wish_item_notes:e.wish_item_notes};else{var o=e,r=n.getDate();o.wish_item_complete_date=r.now}t.updateStudentWishList(a,o).then(function(t){var a=n.wishLists.indexOf(e);n.wishLists[a]=t}).catch(function(e){console.log(e)})},n.getDate=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear(),o=e.getHours(),r=e.getMinutes(),s=e.getSeconds(),c=n+"-"+a+"-"+t+"T"+o+":"+r+":"+s;return{today:e,dd:t,mm:a,yyyy:n,hh:o,m:r,secs:s,now:c}},n.addWishItem=function(e,a){a.student=e,t.createStudentWishList(a).then(function(e){n.wishLists.push(e)}).catch(function(e){console.log(e)})},n.deleteWishItem=function(e){var a=e.id;t.deleteStudentWishList(a).then(function(t){var a=n.wishLists.indexOf(e);n.wishLists.splice(a,1)}).catch(function(e){console.log(e)})}},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-wishlist-"+a.tempType+".directive.html"))}};return n}angular.module("main.directives").directive("studentWishList",e),e.$inject=["$sce","Users","$uibModal"]}(),function(){"use strict";function e(){return function(e,t){var a="";if(t){for(var n=parseInt(t,10),o=e.toString().length,r=0;r<n-o;r++)a="0"+a;a+=e}return a}}function t(){return function(e,t){var a=[];if(angular.isArray(e)){var n=Object.keys(t);e.forEach(function(e){for(var o=!1,r=0;r<n.length;r++){var s=n[r],c=t[s].toLowerCase();if(e[s].toString().toLowerCase().indexOf(c)!==-1){o=!0;break}}o&&a.push(e);
})}else a=e;return a}}function a(){return function(e,t,a){if(t.is_admin)return a.material_added;var n=_.findWhere(a.student_material_item,{student:t.id});return n?n.student_added:a.material_added}}function n(){return function(e,t){var a=[];return t.length?(angular.forEach(e,function(e){e.material_label.length&&angular.forEach(e.material_label,function(n){_.contains(t,n.label_name,0)&&a.push(e)})}),a):e}}function o(){return function(e,t){var a=[];return t.length?(angular.forEach(e,function(e){e.note_label.length&&angular.forEach(e.note_label,function(n){_.contains(t,n.label_name,0)&&a.push(e)})}),a):e}}angular.module("main.filters").filter("numberpad",e),e.$inject=[],angular.module("main.filters").filter("propsFilter",t),t.$inject=[],angular.module("main.filters").filter("matDateFilter",a),a.$inject=[],angular.module("main.filters").filter("materialLabelFilter",n),n.$inject=[],angular.module("main.filters").filter("noteLabelFilter",o),o.$inject=[]}(),function(){"use strict";function e(e,t,a,n){function o(e){return e.data}function r(e){return t.reject(e)}function s(t,a){return e.post("api/v1/auth/login/",{username:t,password:a}).then(function(e){return g.loginToken(e.data,a)}).catch(r)}function c(t,n){return e.post("api/v1/auth/token/",{username:t.username,password:n}).then(function(e){return g.setAuthAcct(t,e.data),g.refreshToken(t),t}).catch(function(e){console.log(e),a.go("login")})}function i(t){return e.post("/api/v1/users/",t).then(o).catch(r)}function u(t){var a=n.getObject("authAcct");return e.post("api/v1/auth/refresh/",{token:a.token}).then(function(e){return g.setAuthAcct(t,e.data),!0}).catch(function(e){return console.log(e),!1})}function l(e,t){return n.putObject("authAcct",{id:e.id,is_staff:e.is_admin,is_admin:e.is_admin,notification:"",token:t.token}),!0}function d(){return n.getObject("authAcct")}function h(){if(n.getObject("authAcct")){var t=n.getObject("authAcct");return e.post("api/v1/auth/verify/",{token:t.token}).then(function(e){return!0}).catch(function(e){return console.log(e),!1})}return!1}function f(){var e=n.getObject("authAcct");return e.is_staff}function p(){return n.remove("authAcct"),e.post("api/v1/auth/logout/").then(m).catch(r)}function m(e){n.remove("authAcct"),a.go("login")}var g={login:s,logout:p,register:i,loginToken:c,refreshToken:u,setAuthAcct:l,getAuthAcct:d,isAuthAcct:h,isStaffAcct:f};return g}angular.module("main.services").factory("Main",e),e.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function e(e,t){return{request:function(e){var a=e.url.slice(0,7),n="api/v1/"===a;if(n&&!!t.getObject("authAcct")){var o=t.getObject("authAcct");e.headers.Authorization="JWT "+o.token}return e}}}angular.module("main.services").factory("tokenInterceptor",e),e.$inject=["$q","$cookies"]}(),function(){"use static";function e(e,t,a,n,o){function r(){n.isAuthAcct()?(u.authAcct=n.getAuthAcct(),a.userId&&u.authAcct.is_staff?u.dashId=a.userId:(u.dashId=u.authAcct.id,t.transitionTo("app.student-goal",{userId:u.dashId},{notify:!1})),s(u.dashId)):t.go("login")}function s(e){o.getUser(e).then(c).catch(i)}function c(e){u.user=e}function i(e){console.log(e),n.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentGoalController",e),e.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function e(e,t,a,n,o){function r(){n.isAuthAcct()?(u.authAcct=n.getAuthAcct(),a.userId&&u.authAcct.is_staff?u.dashId=a.userId:(u.dashId=u.authAcct.id,t.transitionTo("app.student-materials",{userId:u.dashId},{notify:!1})),s(u.dashId)):t.go("login")}function s(e){o.getUser(e).then(c).catch(i)}function c(e){u.user=e}function i(e){console.log(e),n.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentMaterialsController",e),e.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function e(e,t,a,n,o){function r(){n.isAuthAcct()?(u.authAcct=n.getAuthAcct(),a.userId&&u.authAcct.is_staff?u.dashId=a.userId:(u.dashId=u.authAcct.id,t.transitionTo("app.student-objective",{userId:u.dashId},{notify:!1})),s(u.dashId)):t.go("login")}function s(e){o.getUser(e).then(c).catch(i)}function c(e){u.user=e}function i(e){console.log(e),n.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentObjectiveController",e),e.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function e(e,t,a,n,o){function r(){n.isAuthAcct()?(u.authAcct=n.getAuthAcct(),a.userId&&u.authAcct.is_staff?u.dashId=a.userId:(u.dashId=u.authAcct.id,t.transitionTo("app.student-practice",{userId:u.dashId},{notify:!1})),s(u.dashId)):t.go("login")}function s(e){o.getUser(e).then(c).catch(i)}function c(e){u.user=e}function i(e){console.log(e),n.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentPracticeController",e),e.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function e(e,t,a,n,o){function r(){n.isAuthAcct()?(u.authAcct=n.getAuthAcct(),a.userId&&u.authAcct.is_staff?u.dashId=a.userId:(u.dashId=u.authAcct.id,t.transitionTo("app.student-wishlist",{userId:u.dashId},{notify:!1})),s(u.dashId)):t.go("login")}function s(e){o.getUser(e).then(c).catch(i)}function c(e){u.user=e}function i(e){console.log(e),n.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentWishListController",e),e.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function e(e,t,a,n,o,r){function s(){n.isAuthAcct()?(d.authAcct=n.getAuthAcct(),a.userId&&d.authAcct.is_staff?(d.profId=a.userId,o.getLocations().then(function(e){d.locations=e})):(d.profId=d.authAcct.id,t.transitionTo("app.profile",{userId:d.profId},{notify:!1})),c(d.profId)):t.go("app.dashboard")}function c(e){o.getUser(e).then(i).catch(u)}function i(e){d.respUser=e;var t=angular.copy(d.respUser);d.user=_.omit(t,"student_goal","student_log","student_material","student_wishlist","student_objective"),l(d.user.student_note)}function u(e){console.log(e),n.logout()}function l(e){e.length&&angular.forEach(e,function(e,t){e.note_label.length&&angular.forEach(e.note_label,function(e,t){d.noteLabels.indexOf(e)==-1&&d.noteLabels.push(e)})})}var d=this;d.dateReg=/^(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,d.noteLabels=[],d.filterLabels=[],d.updateProfile=function(t){r.upload({url:"api/v1/users/"+t.id+"/",data:t,method:"PUT",headers:{Authorization:"JWT "+d.authAcct.token}}).then(function(t){i(t.data),e.userProfileForm.$setPristine(),e.$emit("update_user_info",t.data)},function(e){console.log("Error status: "+e.status)})},d.clearChanges=function(){d.user={},d.user=angular.copy(d.respUser)},d.deleteNote=function(e){o.deleteStudentNote(e.id).then(function(t){var a=d.user.student_note.indexOf(e);d.user.student_note.splice(a,1)}).catch(function(e){console.log(e)})},s()}angular.module("main.controllers").controller("UserProfileController",e),e.$inject=["$scope","$state","$stateParams","Main","Users","Upload"]}(),function(){"use strict";function e(e,t,a,n,o,r){var s={restrict:"EA",scope:{tempType:"=",userId:"=",userNameFull:"=",studentFeedbackAll:"=",authAcct:"=",path:"="},link:function(a,s,c){a.open=function(o){r.open({templateUrl:e.trustAsResourceUrl(static_path("views/modals/student-feedback.modal.html")),controller:["$scope","$uibModalInstance",function(e,r){var s=this;s.path=a.path,s.edit=!1,o?(a.feedback=o,s.feedBack=angular.copy(o)):a.authAcct.is_staff&&(s.feedBack={},s.edit=!0),s.userNameFull=a.userNameFull,a.authAcct.is_staff&&(s.authAcct=a.authAcct,n.getStudentCourseSchedule(a.userId).then(function(e){s.studentCourses=e}).catch(function(e){console.log(e)})),s.closeModal=function(){s.feedBack={},r.dismiss("cancel")},s.submitFeedBack=function(e){if(console.log(e),e.id)a.updateFeedback(e);else{var t=a.userId;a.addFeedback(t,e)}r.close()},s.removeFeedbackMaterial=function(e){if(e.id)t.deleteStudentFeedbackMaterial(e.id).then(function(t){var a=s.feedBack.material_feedback.indexOf(e);s.feedBack.material_feedback.splice(a,1)}).catch(function(e){console.log(e)});else{var a=s.feedBack.material_feedback.indexOf(e);s.feedBack.material_feedback.splice(a,1)}},s.deleteFeedback=function(e){e.id?a.deleteFeedback(o):s.feedback={},r.close()}}],controllerAs:"vm",size:"lg"})},a.addFeedback=function(e,t){t.student=e,t.feedback_material=t.material_feedback,delete t.material_feedback,o.upload({url:"api/v1/student-feedback/",data:t,method:"POST"}).then(function(e){a.studentFeedbackAll.push(e.data)},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);a.fileProgress=t})},a.updateFeedback=function(e){var t={feedback_text:e.feedback_text};if(e.feedback_course.id!=a.feedback.feedback_course.id&&(t.feedback_course=e.feedback_course.id),e.material_feedback.length){var n=[];angular.forEach(e.material_feedback,function(e,t){e.id||n.push(e)}),t.feedback_material=n}o.upload({url:"api/v1/student-feedback/"+e.id+"/",data:t,method:"PUT"}).then(function(e){var t=a.studentFeedbackAll.indexOf(a.feedback);a.studentFeedbackAll[t]=e.data},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);a.fileProgress=t})},a.deleteFeedback=function(e){t.deleteStudentFeedback(e.id).then(function(t){var n=a.studentFeedbackAll.indexOf(e);a.studentFeedbackAll.splice(n,1)}).catch(function(e){console.log(e)})},a.pageSetUp=function(){a.pageSet={viewby:"5",totalItems:a.studentFeedbackAll.length,currentPage:1,itemsPerPage:"5",maxSize:"5"}},a.$watch("studentFeedbackAll",function(e,t){e&&a.pageSetUp()},!0)},templateUrl:function(t,a){return e.trustAsResourceUrl(static_path("views/directives/student-feedback-"+a.tempType+".directive.html"))}};return s}angular.module("users.directives").directive("studentFeedback",e),e.$inject=["$sce","Users","Main","Schedule","Upload","$uibModal"]}(),function(){"use strict";function e(e,t,a,n){var o={restrict:"EA",scope:{user:"=",note:"="},link:function(a,o,r){function s(e){a.user.student_note.push(e)}function c(e){console.log(e)}o.on("click",function(){n.open({templateUrl:e.trustAsResourceUrl(static_path("views/modals/user-note.modal.html")),controller:["$scope","$uibModalInstance",function(e,t){var n=this;n.user=a.user,n.note={},n.note.note_label=[],a.note&&(n.note=a.note),n.closeModal=function(){n.note={},t.dismiss("cancel")},n.addNote=function(e){e.student=n.user.id,t.close(),a.postNote(e)},n.editNote=function(e){t.close(),a.updateNote(e)}}],controllerAs:"vm",size:"md"})}),a.postNote=function(e){t.createStudentNote(e).then(s).catch(c)},a.updateNote=function(e){t.updateStudentNote(e.id,e).then(function(t){var n=a.user.student_note.indexOf(e);a.user.student_note[n]=t}).catch(c)}}};return o}angular.module("users.directives").directive("userNote",e),e.$inject=["$sce","Users","Main","$uibModal"]}(),function(){"use strict";function e(e,t,a,n){function o(e){return e.data}function r(e){return t.reject("Error "+e.status)}function s(){var t=n.getObject("authAcct");return e.get("api/v1/users/",{Authorization:"JWT "+t.token}).then(o).catch(r)}function c(t){var a=n.getObject("authAcct");return e.get("api/v1/users/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}function i(){var t=n.getObject("authAcct");return e.get("api/v1/users-simple/",{Authorization:"JWT "+t.token}).then(o).catch(r)}function u(){var t=n.getObject("authAcct");return e.get("api/v1/users-leaderboard/",{Authorization:"JWT "+t.token}).then(o).catch(r)}function l(){var t=n.getObject("authAcct");return e.get("api/v1/locations/",{Authorization:"JWT "+t.token}).then(o).catch(r)}function d(){var t=n.getObject("authAcct");return e.get("api/v1/student-label/",{Authorization:"JWT "+t.token}).then(o).catch(r)}function h(t){var a=n.getObject("authAcct");return e.put("api/v1/users/"+t.id+"/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function f(t){var a=n.getObject("authAcct");return e.post("api/v1/student-goals/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function p(t,a){var s=n.getObject("authAcct");return e.put("api/v1/student-goals/"+t+"/",a,{Authorization:"JWT "+s.token}).then(o).catch(r)}function m(t){var a=n.getObject("authAcct");return e.delete("api/v1/student-goals/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}function g(t){var a=n.getObject("authAcct");return e.post("api/v1/student-objectives/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function v(t,a){var s=n.getObject("authAcct");return e.put("api/v1/student-objectives/"+t+"/",a,{Authorization:"JWT "+s.token}).then(o).catch(r)}function _(t){var a=n.getObject("authAcct");return e.delete("api/v1/student-objectives/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}function b(t){var a=n.getObject("authAcct");return e.post("api/v1/student-practice-logs/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function A(t){var a=n.getObject("authAcct");return e.put("api/v1/student-practice-logs/"+t.id+"/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function $(t){var a=n.getObject("authAcct");return e.delete("api/v1/student-practice-logs/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}function k(t){var a=n.getObject("authAcct");return e.post("api/v1/student-wish-list/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function w(t,a){var s=n.getObject("authAcct");return e.put("api/v1/student-wish-list/"+t+"/",a,{Authorization:"JWT "+s.token}).then(o).catch(r)}function y(t){var a=n.getObject("authAcct");return e.delete("api/v1/student-wish-list/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}function T(t){var a=n.getObject("authAcct");return e.post("api/v1/student-materials/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function j(t,a){var s=n.getObject("authAcct");return e.put("api/v1/student-materials/"+t+"/",a,{Authorization:"JWT "+s.token}).then(o).catch(r)}function I(t){var a=n.getObject("authAcct");return e.delete("api/v1/student-materials/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}function U(t){var a=n.getObject("authAcct");return e.post("api/v1/student-notes/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function M(t,a){var s=n.getObject("authAcct");return e.put("api/v1/student-notes/"+t+"/",a,{Authorization:"JWT "+s.token}).then(o).catch(r)}function C(t){var a=n.getObject("authAcct");return e.delete("api/v1/student-notes/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}function L(t){var a=n.getObject("authAcct");return e.post("api/v1/student-feedback/",t,{Authorization:"JWT "+a.token}).then(o).catch(r)}function S(t,a){var s=n.getObject("authAcct");return e.put("api/v1/student-feedback/"+t+"/",a,{Authorization:"JWT "+s.token}).then(o).catch(r)}function D(t){var a=n.getObject("authAcct");return e.delete("api/v1/student-feedback/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}function O(t){var a=n.getObject("authAcct");return e.delete("api/v1/student-feedback-material/"+t+"/",{Authorization:"JWT "+a.token}).then(o).catch(r)}var P={getAll:s,getUser:c,getAllSimpleUsers:i,getUserLeaderBoard:u,getLocations:l,getAllLabels:d,updateUserProfile:h,createStudentGoal:f,updateStudentGoal:p,deleteStudentGoal:m,createStudentObjective:g,updateStudentObjective:v,deleteStudentObjective:_,createStudentPracticeLog:b,updateStudentPracticeLog:A,deleteStudentPracticeLog:$,createStudentWishList:k,updateStudentWishList:w,deleteStudentWishList:y,createStudentMaterial:T,updateStudentMaterial:j,deleteStudentMaterial:I,createStudentNote:U,updateStudentNote:M,deleteStudentNote:C,createStudentFeedback:L,updateStudentFeedback:S,deleteStudentFeedback:D,deleteStudentFeedbackMaterial:O};return P}angular.module("users.services").factory("Users",e),e.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function e(e,t,a,n,o,r,s,c,i,u,l){function d(){parseInt(h.user.user_credit)<parseInt(h.course.course_credit)?h.needCredit=!0:h.needCredit=!1,h.newClass={course_id:i.id,student_id:u.id,schedule_date:s(c.date).format("YYYY-MM-DD"),schedule_start_time:i.course_start_time,schedule_end_time:i.course_end_time,recurring:!1},"sched"==h.courseType&&_.contains(h.schedType.scheduledCourse.schedule_recurring_user,h.user.id)&&(h.newClass.recurring=!0)}var h=this;h.date=c,h.course=i,h.user=u,h.schedType=l,h.courseType=l.courseType,d(),h.getTime=function(e){return e.length<10?s("1999-12-12 "+e,"YYYY-MM-DD h:mm a").toDate():e},h.addClass=function(){"sched"==h.courseType&&(h.newClass.schedule=h.schedType.scheduledCourse.id),r.close(h.newClass,h.courseType)},h.closeModal=function(){r.dismiss("cancel")}}angular.module("schedule.controllers").controller("AddCourseController",e),e.$inject=["$scope","$sce","Main","Users","Schedule","$uibModalInstance","moment","date","course","user","schedType"]}(),function(){"use strict";function e(e,t,a,n,o,r,s,c,i,u,l){function d(){parseInt(h.user.user_credit)<parseInt(h.course.course_credit)?h.needCredit=!0:h.needCredit=!1,h.newClass={course_id:i.id,student_id:u.id,schedule_date:s(c.date).format("YYYY-MM-DD"),schedule_start_time:i.course_start_time,schedule_end_time:i.course_end_time,recurring:!1},"sched"==h.courseType&&_.contains(h.schedType.scheduledCourse.schedule_recurring_user,h.user.id)&&(h.newClass.recurring=!0)}var h=this;h.date=c,h.course=i,h.user=u,h.schedType=l,h.courseType=l.courseType,d(),h.getTime=function(e){return e.length<10?s("1999-12-12 "+e,"YYYY-MM-DD h:mm a").toDate():e},h.addClass=function(){"sched"==h.courseType&&(h.newClass.schedule=h.schedType.scheduledCourse.id),r.close(h.newClass,h.courseType)},h.closeModal=function(){r.dismiss("cancel")}}angular.module("schedule.controllers").controller("AddCourseController",e),e.$inject=["$scope","$sce","Main","Users","Schedule","$uibModalInstance","moment","date","course","user","schedType"]}(),function(){"use strict";function e(e,t,a,n,o,r,s,c,i){function u(){n.isAuthAcct()?(A.authAcct=n.getAuthAcct(),o.getUser(A.authAcct.id).then(function(e){A.user=e,r.getAllCourses().then(l).catch(d),r.getSchedule().then(h).catch(f)}).catch(function(e){n.logout()})):console.log("Could not get account"),A.authAcct.is_admin&&(i.showTimesOnWeekView=!0,i.displayEventEndTimes=!0,A.calendarView="month"),A.calendarDate=new Date,p()}function l(e){A.courses=e,A.courseAvail=!0,A.getCourses(A.courses)}function d(e){console.log(e)}function h(e){A.schedule=e,A.schedAvail=!0,A.user.is_admin&&A.setSchedule(e)}function f(e){console.log(e)}function p(){A.week=[];for(var e=0;e<7;e++){var t=c(A.calendarDate).add(e,"d").format("dddd").toLowerCase();A.week.push({day:t,date:c(A.calendarDate).add(e,"d").toDate()})}}function m(e){u()}function g(e){console.log(e)}function v(e){u()}function b(e){console.log(e)}var A=this;A.isCollapsed=!0,A.schedAvail=!1,A.courseAvail=!1,A.userSchedule=[],u(),A.getCourses=function(e){A.availCourses=[],angular.forEach(e,function(e,t){for(var a=0;a<7;a++){var n=c(A.calendarDate).add(a,"d").format("dddd").toLowerCase(),o=c(A.calendarDate).add(a,"d").format("YYYY-MM-DD");if(1==_.propertyOf(e)(n)&&A.checkStudent(A.user,e)){if(e.course_location)var r=e.course_location.name;else var r="no location set";A.availCourses.push({day:n,date:c(A.calendarDate).add(a,"d").toDate(),start:c(o+"T"+e.course_start_time).toDate(),end:c(o+"T"+e.course_end_time).toDate(),course:e}),A.userSchedule.push({title:e.course_title+" - "+r,type:"info",startsAt:c(o+"T"+e.course_start_time).toDate(),endsAt:c(o+"T"+e.course_end_time).toDate(),editable:!0,deletable:!0,draggable:!1,resizable:!1,incrementsBadgeTotal:!0,course:e})}}})},A.checkStudent=function(e,t){if(A.user.is_admin)return!0;var a=e.play_level_display.toLowerCase(),n=c().diff(c(e.date_of_birth,"YYYYMMDD"),"years");if(e.student_log.length>0)var o=_.pluck(e.student_log,"practice_time"),r=o.reduce(function(e,t){return parseInt(e)+parseInt(t)});else var r=0;return!!(_.propertyOf(t)(a)&&n>=t.course_age_min&&n<=t.course_age_max&&r>=parseInt(t.practice_min))},A.setSchedule=function(e){angular.forEach(e,function(e,t){if(e.course.course_location)var a=e.course.course_location.name;else var a="no location set";var n={title:e.course.course_title+" - "+a,type:"success",startsAt:c(e.schedule_date+"T"+e.schedule_start_time).toDate(),endsAt:c(e.schedule_date+"T"+e.schedule_end_time).toDate(),editable:!0,deletable:!0,draggable:!1,resizable:!1,incrementsBadgeTotal:!0,schedule:e};A.userSchedule.push(n)})},A.addCourse=function(e){r.addCourse(e).then(m).catch(g)},A.removeCourse=function(e){r.removeCourse(e).then(v).catch(b)},A.checkDate=function(e,t){var a=c(e).format("YYYY-MM-DD"),n=c(t).format("YYYY-MM-DD");return a===n},A.isDay=function(e){return!(c(e)<c(A.calendarDate).add(10,"m"))},A.checkMax=function(e){angular.forEach(A.schedule,function(t,a){var n=c(e.date).format("YYYY-MM-DD");if(e.course.id==t.course.id&&c(n+"T"+e.course.course_start_time).toDate()==c(t.schedule_date+"T"+t.schedule_start_time).toDate())return parseInt(e.course.max_student)>parseInt(t.student.length)})},A.getTime=function(e){return c("1999-12-12T"+e).format("h:mm a")},A.eventClicked=function(e){if(e.course)var t=e.course,a="new",n="";else if(e.schedule)var t=e.schedule.course,a="sched",n=e.schedule;A.open({date:e.startsAt,courseStart:c(e.startsAt).format("h:mm a"),courseEnd:c(e.endsAt).format("h:mm a")},t,A.user,{courseType:a,scheduledCourse:n})},A.open=function(e,a,n,o){var r=s.open({animation:!0,templateUrl:t.trustAsResourceUrl(static_path("views/modals/add-course.modal.html")),controller:"AddCourseController",controllerAs:"vm",size:"lg",resolve:{date:e,course:a,user:n,schedType:o}});r.result.then(function(e){e.schedule?A.removeCourse(e):A.addCourse(e)})}}angular.module("schedule.controllers").controller("ScheduleController",e),e.$inject=["$scope","$sce","$state","Main","Users","Schedule","$uibModal","moment","calendarConfig"]}(),function(){"use strict";function e(e,t,a,n,o,r,s,c,i){function u(){n.isAuthAcct()?(A.authAcct=n.getAuthAcct(),o.getUser(A.authAcct.id).then(function(e){A.user=e,r.getAllCourses().then(l).catch(d),r.getSchedule().then(h).catch(f)}).catch(function(e){n.logout()})):console.log("Could not get account"),A.authAcct.is_admin&&(i.showTimesOnWeekView=!0,i.displayEventEndTimes=!0,A.calendarView="month"),A.calendarDate=new Date,p()}function l(e){A.courses=e,A.courseAvail=!0,A.getCourses(A.courses)}function d(e){console.log(e)}function h(e){A.schedule=e,A.schedAvail=!0,A.user.is_admin&&A.setSchedule(e)}function f(e){console.log(e)}function p(){A.week=[];for(var e=0;e<7;e++){var t=c(A.calendarDate).add(e,"d").format("dddd").toLowerCase();A.week.push({day:t,date:c(A.calendarDate).add(e,"d").toDate()})}}function m(e){u()}function g(e){console.log(e)}function v(e){u()}function b(e){console.log(e)}var A=this;A.isCollapsed=!0,A.schedAvail=!1,A.courseAvail=!1,A.userSchedule=[],u(),A.getCourses=function(e){A.availCourses=[],angular.forEach(e,function(e,t){for(var a=0;a<7;a++){var n=c(A.calendarDate).add(a,"d").format("dddd").toLowerCase(),o=c(A.calendarDate).add(a,"d").format("YYYY-MM-DD");if(1==_.propertyOf(e)(n)&&A.checkStudent(A.user,e)){if(e.course_location)var r=e.course_location.name;else var r="no location set";A.availCourses.push({day:n,date:c(A.calendarDate).add(a,"d").toDate(),start:c(o+"T"+e.course_start_time).toDate(),end:c(o+"T"+e.course_end_time).toDate(),course:e}),A.userSchedule.push({title:e.course_title+" - "+r,type:"info",startsAt:c(o+"T"+e.course_start_time).toDate(),endsAt:c(o+"T"+e.course_end_time).toDate(),editable:!0,deletable:!0,draggable:!1,resizable:!1,incrementsBadgeTotal:!0,course:e})}}})},A.checkStudent=function(e,t){if(A.user.is_admin)return!0;var a=e.play_level_display.toLowerCase(),n=c().diff(c(e.date_of_birth,"YYYYMMDD"),"years");if(e.student_log.length>0)var o=_.pluck(e.student_log,"practice_time"),r=o.reduce(function(e,t){return parseInt(e)+parseInt(t)});else var r=0;return!!(_.propertyOf(t)(a)&&n>=t.course_age_min&&n<=t.course_age_max&&r>=parseInt(t.practice_min))},A.setSchedule=function(e){angular.forEach(e,function(e,t){if(e.course.course_location)var a=e.course.course_location.name;else var a="no location set";var n={title:e.course.course_title+" - "+a,type:"success",startsAt:c(e.schedule_date+"T"+e.schedule_start_time).toDate(),endsAt:c(e.schedule_date+"T"+e.schedule_end_time).toDate(),editable:!0,deletable:!0,draggable:!1,resizable:!1,incrementsBadgeTotal:!0,schedule:e};A.userSchedule.push(n)})},A.addCourse=function(e){r.addCourse(e).then(m).catch(g)},A.removeCourse=function(e){r.removeCourse(e).then(v).catch(b)},A.checkDate=function(e,t){var a=c(e).format("YYYY-MM-DD"),n=c(t).format("YYYY-MM-DD");return a===n},A.isDay=function(e){return!(c(e)<c(A.calendarDate).add(10,"m"))},A.checkMax=function(e){angular.forEach(A.schedule,function(t,a){var n=c(e.date).format("YYYY-MM-DD");if(e.course.id==t.course.id&&c(n+"T"+e.course.course_start_time).toDate()==c(t.schedule_date+"T"+t.schedule_start_time).toDate())return parseInt(e.course.max_student)>parseInt(t.student.length)})},A.getTime=function(e){return c("1999-12-12T"+e).format("h:mm a")},A.eventClicked=function(e){if(e.course)var t=e.course,a="new",n="";else if(e.schedule)var t=e.schedule.course,a="sched",n=e.schedule;A.open({date:e.startsAt,courseStart:c(e.startsAt).format("h:mm a"),courseEnd:c(e.endsAt).format("h:mm a")},t,A.user,{courseType:a,scheduledCourse:n})},A.open=function(e,a,n,o){var r=s.open({animation:!0,templateUrl:t.trustAsResourceUrl(static_path("views/modals/add-course.modal.html")),controller:"AddCourseController",controllerAs:"vm",size:"lg",resolve:{date:e,course:a,user:n,schedType:o}});r.result.then(function(e){e.schedule?A.removeCourse(e):A.addCourse(e)})}}angular.module("schedule.controllers").controller("ScheduleController",e),e.$inject=["$scope","$sce","$state","Main","Users","Schedule","$uibModal","moment","calendarConfig"]}(),function(){"use strict";function e(e,t,a,n){function o(e){return e.data}function r(e){return t.reject("Error "+e.status)}function s(){return e.get("api/v1/courses/").then(o).catch(r)}function c(){return e.get("api/v1/course-schedule/").then(o).catch(r)}function i(t){return e.get("api/v1/course-schedule?student-id="+t).then(o).catch(r)}function u(t){return e.post("api/v1/course-schedule/",t).then(o).catch(r)}function l(t){return e.put("api/v1/course-schedule-remove/"+t.schedule+"/",t).then(o).catch(r)}var d=this;d.acct=n.getObject("authAcct");var h={getAllCourses:s,getSchedule:c,getStudentCourseSchedule:i,addCourse:u,removeCourse:l};return h}angular.module("schedule.services").factory("Schedule",e),e.$inject=["$http","$q","$state","$cookies"]}();