!function(){"use strict";function t(t){t.defaults.xsrfHeaderName="X-CSRFToken",t.defaults.xsrfCookieName="csrftoken"}function e(t,e,n){t.$on("$stateChangeStart",function(a,o,r){var i=o.data.requireLogin,s=n.isAuthAcct();if(i&&!s)return a.preventDefault(),e.go("login"),t})}angular.module("hga",["ngAnimate","ngTouch","ngSanitize","ngCookies","ngFileUpload","ngAudio","angularMoment","monospaced.elastic","ui.router","ui.bootstrap","ui.select","mwl.calendar","hga.config","hga.routes","main","users","forum","schedule"]),angular.module("hga.config",["ui.router"]),angular.module("hga.routes",["ui.router.router"]),angular.module("hga").run(t),t.$inject=["$http"],angular.module("hga").run(e),e.$inject=["$rootScope","$state","Main"]}(),function(){"use strict";function t(t,e,n){n.interceptors.push("tokenInterceptor"),e.caseInsensitive(!0),e.strictMode(!1)}angular.module("hga.config").config(t),t.$inject=["$locationProvider","$urlMatcherFactoryProvider","$httpProvider"]}(),function(){"use strict";function t(t,e){e.otherwise(function(t){var e=t.get("$state");e.go("app.dashboard")}),t.state("app",{abstract:!0,url:"/app",controller:"AppController",controllerAs:"vm",templateUrl:static_path("views/main/app.html"),data:{requireLogin:!0}}).state("app.dashboard",{url:"/dashboard/:userId",controller:"DashBoardController",controllerAs:"vm",templateUrl:static_path("views/main/dashboard.html"),data:{requireLogin:!0}}).state("app.leaderboard",{url:"/leaderboard/:userId",controller:"LeaderBoardController",controllerAs:"vm",templateUrl:static_path("views/main/leaderboard.html"),data:{requireLogin:!0}}).state("app.profile",{url:"/profile/:userId",controller:"UserProfileController",controllerAs:"vm",templateUrl:static_path("views/users/user-profile.html"),data:{requireLogin:!0}}).state("app.student-goal",{url:"/student-goals/:userId",controller:"StudentGoalController",controllerAs:"vm",templateUrl:static_path("views/users/student-goal.html"),data:{requireLogin:!0}}).state("app.student-objective",{url:"/student-objectives/:userId",controller:"StudentObjectiveController",controllerAs:"vm",templateUrl:static_path("views/users/student-objective.html"),data:{requireLogin:!0}}).state("app.student-practice",{url:"/student-practice/:userId",controller:"StudentPracticeController",controllerAs:"vm",templateUrl:static_path("views/users/student-practice.html"),data:{requireLogin:!0}}).state("app.student-wishlist",{url:"/student-wishlist/:userId",controller:"StudentWishListController",controllerAs:"vm",templateUrl:static_path("views/users/student-wishlist.html"),data:{requireLogin:!0}}).state("app.student-materials",{url:"/student-materials/:userId",controller:"StudentMaterialsController",controllerAs:"vm",templateUrl:static_path("views/users/student-materials.html"),data:{requireLogin:!0}}).state("app.forum",{url:"/forum",controller:"ForumController",controllerAs:"vm",templateUrl:static_path("views/forum/forum.html"),data:{requireLogin:!0}}).state("app.schedule",{url:"/schedule",controller:"ScheduleController",controllerAs:"vm",templateUrl:static_path("views/schedule/schedule.html"),data:{requireLogin:!0}}).state("login",{url:"/login",controller:"AuthenticationController",controllerAs:"vm",templateUrl:static_path("views/main/login.html"),data:{requireLogin:!1}}).state("logout",{url:"/logout",controller:"LogoutController",controllerAs:"vm",data:{requireLogin:!0}})}angular.module("hga.routes").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("forum",["forum.controllers","forum.services","forum.directives"]),angular.module("forum.controllers",[]),angular.module("forum.services",[]),angular.module("forum.directives",[])}(),function(){"use strict";angular.module("main",["main.controllers","main.services","main.directives","main.filters"]),angular.module("main.controllers",[]),angular.module("main.services",[]),angular.module("main.directives",[]),angular.module("main.filters",[])}(),function(){"use strict";angular.module("schedule",["schedule.controllers","schedule.services","schedule.directives"]),angular.module("schedule.controllers",[]),angular.module("schedule.services",[]),angular.module("schedule.directives",[])}(),function(){"use strict";angular.module("users",["users.controllers","users.services","users.directives"]),angular.module("users.controllers",[]),angular.module("users.services",[]),angular.module("users.directives",[])}(),function(){"use strict";function t(t,e,n,a,o,r){function i(){if(a.isAuthAcct()){var t=a.getAuthAcct();r.getUser(t.id).then(function(t){u.user=t}).catch(function(t){a.logout()}),o.getAllCategories().then(s).catch(c)}else console.log("Could not get account")}function s(t){u.categories=t}function c(t){console.log(t)}var u=this;u.discussionClass="",i(),u.setCategory=function(t){u.discussionClass="animate fadeOutDown",u.category=t,u.discussionClass="animate fadeInDown"}}angular.module("forum.controllers").controller("ForumController",t),t.$inject=["$scope","$sce","$state","Main","Forum","Users"]}(),function(){"use strict";function t(t,e,n,a,o,r){var i={restrict:"EA",scope:{category:"=",userId:"=",path:"=",playLevelColor:"=",discussionClass:"="},link:function(n,i,s){function c(t){n.category.category_topic.push(t),n.getMessages(t.id)}function u(t){console.log(t)}function l(t){n.messages=t,n.messageClass="animated fadeInRight"}function d(t){console.log(t)}n.newMessage={},n.authAcct=e.getObject("authAcct"),n.open=function(e){o.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/forum-topic.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,e,a){var o=this;o.closeModal=function(){e.dismiss("cancel")},o.addNewTopic=function(t){n.addTopic(t),e.close()}}],controllerAs:"vm",size:"lg"})},n.addTopic=function(t){t.category_id=n.category.id,a.addNewTopic(t).then(c).catch(u)},n.getMessages=function(t){n.messageClass="animated fadeOutLeft",a.getAllMessages(t).then(l).catch(d)},n.addMessage=function(t,e){var a={message:t.message,topic_id:e,message_file:t.message_file};r.upload({url:"api/v1/forum-message/",data:a}).then(function(t){n.newMessage={},n.messages.topic_message.push(t.data)},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);n.fileProgress=e,console.log("progress: "+e+"% "+t.config.data.message_file.name)})},n.$watch("category",function(t){t&&(n.messages="")},!0)},templateUrl:t.trustAsResourceUrl(static_path("views/directives/forum-discussion.directive.html"))};return i}angular.module("forum.directives").directive("forumDiscussion",t),t.$inject=["$sce","$cookies","Users","Forum","$uibModal","Upload"]}(),function(){"use strict";function t(t,e,n,a){function o(t){return t.data}function r(t){return e.reject("Error "+t.status)}function i(){return t.get("api/v1/forum-topics/").then(o).catch(r)}function s(){return t.get("api/v1/forum-category/").then(o).catch(r)}function c(e){return t.get("api/v1/forum-topics/"+e+"/",e).then(o).catch(r)}function u(e){return t.post("api/v1/forum-message/",e).then(o).catch(r)}function l(e){return t.post("api/v1/forum-topics/",e).then(o).catch(r)}var d=this;d.acct=a.getObject("authAcct");var h={getAllTopics:i,getAllCategories:s,getAllMessages:c,addNewMessage:u,addNewTopic:l};return h}angular.module("forum.services").factory("Forum",t),t.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function t(t,e,n,a,o){function r(){a.isAuthAcct().then(function(t){s.authAcct=a.getAuthAcct(),o.getUser(s.authAcct.id).then(function(t){s.currentUser=t}).catch(function(t){a.logout()})}).catch(function(t){console.log(t),a.logout()}),i()}function i(){var t=!1;s.lbd={misc:{navbar_menu_visible:0},initRightMenu:function(){t||(s.off_canvas_sidebar=$("nav").find(".navbar-collapse").first().clone(!0),s.sidebar=$(".sidebar"),s.sidebar_bg_color=s.sidebar.data("background-color"),s.sidebar_active_color=s.sidebar.data("active-color"),s.logo=s.sidebar.find(".logo").first(),s.logo_content=s.logo[0].outerHTML,s.ul_content="",s.off_canvas_sidebar.attr("data-background-color",s.sidebar_bg_color),s.off_canvas_sidebar.attr("data-active-color",s.sidebar_active_color),s.off_canvas_sidebar.addClass("off-canvas-sidebar"),s.off_canvas_sidebar.children("ul").each(function(){s.content_buff=$(this).html(),s.ul_content=s.ul_content+s.content_buff}),s.content_buff=s.sidebar.find(".nav").html(),s.ul_content=s.ul_content+'<li class="divider"></li>'+s.content_buff,s.ul_content='<ul class="nav navbar-nav">'+s.ul_content+"</ul>",s.navbar_content=s.logo_content+s.ul_content,s.navbar_content='<div class="sidebar-wrapper">'+s.navbar_content+"</div>",s.off_canvas_sidebar.html(s.navbar_content),$("body").append(s.off_canvas_sidebar),s.toggle=$(".navbar-toggle"),s.off_canvas_sidebar.find("a").removeClass("btn btn-round btn-default"),s.off_canvas_sidebar.find("button").removeClass("btn-round btn-fill btn-info btn-primary btn-success btn-danger btn-warning btn-neutral"),s.off_canvas_sidebar.find("button").addClass("btn-simple btn-block"),s.toggle.click(function(){1==s.lbd.misc.navbar_menu_visible?($("html").removeClass("nav-open"),s.lbd.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){s.toggle.removeClass("toggled")},400)):(setTimeout(function(){s.toggle.addClass("toggled")},430),s.div='<div id="bodyClick"></div>',$(s.div).appendTo("body").click(function(){$("html").removeClass("nav-open"),s.lbd.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){s.toggle.removeClass("toggled")},400)}),$("html").addClass("nav-open"),s.lbd.misc.navbar_menu_visible=1)}),s.sideMenu=$(".side-menu"),s.sideMenu.click(function(){1==s.lbd.misc.navbar_menu_visible?($("html").removeClass("nav-open"),s.lbd.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){s.toggle.removeClass("toggled")},400)):(setTimeout(function(){s.toggle.addClass("toggled")},430),s.div='<div id="bodyClick"></div>',$(s.div).appendTo("body").click(function(){$("html").removeClass("nav-open"),s.lbd.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){s.toggle.removeClass("toggled")},400)}),$("html").addClass("nav-open"),s.lbd.misc.navbar_menu_visible=1)}),t=!0)}},$(document).ready(function(){var t=$(window).width();t<=991&&window.setTimeout(s.lbd.initRightMenu,1e3),$('[rel="tooltip"]').tooltip()}),$(window).resize(function(){$(window).width()<=991&&s.lbd.initRightMenu()})}var s=this;t.$on("update_user_info",function(t,e){s.authAcct.id==e.id&&(s.currentUser=e)});var c=media_path(""),u=static_path("");t.path={static_files:e.trustAsResourceUrl(u),media:e.trustAsResourceUrl(c)},t.playLevelColor={1:"bg-white",2:"bg-red",3:"bg-yellow",4:"bg-green",5:"bg-blue",6:"bg-purple",7:"bg-brown",8:"bg-black"},r()}angular.module("main.controllers").controller("AppController",t),t.$inject=["$scope","$sce","$state","Main","Users"]}(),function(){"use static";function t(t,e,n,a,o,r,i){function s(){r.isAuthAcct()&&(h.authUser=r.getAuthAcct(),n.go("app.dashboard",{userId:h.authUser.id}))}function c(t){n.go("app.dashboard",{userId:t.id})}function u(t){console.log(t),h.loginError=t.data.message}function l(e){$.notify({icon:"ti-check",message:"Account has been created! Pending activation from Hirsch Guitar Academy. You will receive an email upon activation."},{type:"warning",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}),t.isCollapsed=!1,t.registerForm.$setPristine(),h.newUser={},n.go("login")}function d(t){console.log(t),500===t.status?h.registerError="username or email in use":h.registerError=t.data.message}var h=this;h.dateReg=/^(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,s(),h.goToSignup=function(){$("html, body").animate({scrollTop:$("#signup").offset().top},300)},h.login=function(t,e){r.login(t,e).then(c).catch(u)},h.register=function(t){t.password===t.confirm_password?r.register(t).then(l).catch(d):h.registerError="Passwords must match!"};var f=media_path(""),g=static_path("");t.path={static_files:e.trustAsResourceUrl(g),media:e.trustAsResourceUrl(f)}}angular.module("main.controllers").controller("AuthenticationController",t),t.$inject=["$scope","$sce","$state","$location","$anchorScroll","Main","Users"]}(),function(){"use static";function t(t,e,n,a,o){function r(){a.isAuthAcct()?(u.authAcct=a.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.dashboard",{userId:u.dashId},{notify:!1})),i(u.dashId)):e.go("login")}function i(t){o.getUser(t).then(s).catch(c)}function s(t){u.user=t}function c(t){console.log(t),a.logout()}var u=this;u.timerVis=!1,r()}angular.module("main.controllers").controller("DashBoardController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,a,o){function r(){a.isAuthAcct()?(u.authAcct=a.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.leaderboard",{userId:u.dashId},{notify:!1})),i(u.dashId)):e.go("login")}function i(t){o.getUser(t).then(s).catch(c)}function s(t){u.user=t}function c(t){console.log(t),a.logout()}var u=this;r()}angular.module("main.controllers").controller("LeaderBoardController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function t(t,e){function n(){e.isAuthAcct()?e.logout():t.go("login")}n()}angular.module("main.controllers").controller("LogoutController",t),t.$inject=["$state","Main"]}(),function(){"use strict";function t(t,e,n,a){var o={restrict:"EA",scope:{path:"="},link:function(t,o,r){function i(){t.twelve=[],t.sixty=[];for(var e=0;e<60;e++)t.sixty.push(e);for(var n=0;n<=12;n++)t.twelve.push(n);var a=angular||{},o=navigator.userAgent;a.ff=o.indexOf("Firefox")!=-1,a.chr=o.indexOf("Chrome")!=-1,a.saf=o.indexOf("Safari")!=-1&&!a.chr,a.saf&&(t.metAlert="For best results use Metronome in Google Chrome or FireFox")}function s(){var n=t.oneMin/t.bpm;t.metTimeoutId=e(s,n),l(),t.beatCount++,t.beatCount>t.bpb&&(t.beatCount=1),1==t.beatCount?u():c()}function c(){t.tock.stop(),t.tick.play()}function u(){t.tick.stop(),t.tock.play()}function l(){var e=1/(t.bpm/60);t.left?(t.beatReset=!1,t.beatRight=!1,t.beatLeft=!0,t.beatBarStyle={"-webkit-transition":"all "+e+"s ease-in-out","-moz-transition":"all "+e+"s ease-in-out","-o-transition":"all "+e+"s ease-in-out",transition:"all "+e+"s ease-in-out"},t.left=0):(t.beatReset=!1,t.beatLeft=!1,t.beatRight=!0,t.left++)}function d(){t.beatRight=!1,t.beatLeft=!1,t.beatReset=!0}function h(){g=n(function(){f()},1e3)}function f(){0==t.seconds?(t.seconds=59,0==t.minutes?(t.minutes=59,t.hours>0&&t.hours--):1==t.minutes?t.minutes=0:t.minutes>1&&t.minutes--):1==t.seconds&&0==t.minutes&&0==t.hours?(t.seconds=0,t.stop()):t.seconds>=1&&t.seconds--}var g;t.seconds=0,t.minutes=0,t.hours=0,t.running=!1;var p=static_path("sounds/tick.mp3"),m=static_path("sounds/tock.mp3");t.tick=a.load(p),t.tock=a.load(m),t.metTimeoutId=0,t.timeoutClearId=0,t.oneMin=6e4,t.bpm=100,t.bpb=4,t.beatCount=1,t.left=1,t.turnedOn=!1,t.bpmPlus=function(e){var n=parseFloat(e);t.bpm=parseFloat(n+1)},t.bpmMinus=function(e){var n=parseFloat(e);t.bpm=parseFloat(n-1)},t.bpbPlus=function(e){var n=parseFloat(e);t.bpb=parseFloat(n+1)},t.bpbMinus=function(e){var n=parseFloat(e);t.bpb=parseFloat(n-1)},t.startMet=function(){return!t.turnedOn&&(t.beatCount=1,s(),void(t.turnedOn=!0))},t.stopMet=function(){e.cancel(t.metTimeoutId),t.beatCount=1,d(),t.turnedOn=!1},t.setTime=function(){t.setHours>0?t.hours=t.setHours:t.hours=0,t.setMinutes>0?t.minutes=t.setMinutes:t.minutes=0,t.seconds=0},t.stop=function(){n.cancel(g),t.running=!1},t.start=function(){0==t.seconds&&0==t.minutes&&0==t.hours&&t.setTime(),h(),t.running=!0},t.clear=function(){t.hours=0,t.seconds=0,t.minutes=0},i()},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/stopwatch.directive.html"))}};return o}angular.module("main.directives").directive("stopWatch",t),t.$inject=["$sce","$timeout","$interval","ngAudio"]}(),function(){"use strict";function t(t,e,n,a,o,r){var i={restrict:"EA",scope:{tempType:"=",userId:"=",goals:"="},link:function(o,i,s){o.sortType=["goal_complete","goal_target_date"],o.sortReverse=!1,o.searchItem="",o.open=function(e){a.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-goal.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,n,a){var r=this;e.id?(r.modalTitle="Update Goal",r.studentGoal=e):(r.modalTitle="New Goal",r.studentGoal={}),r.openDate=function(t){t.preventDefault(),t.stopPropagation(),a(function(){r.showPicker.opened=!r.showPicker.opened})},r.showPicker={opened:!1},r.closeModal=function(){n.dismiss("cancel")},r.submitGoal=function(t){if(e.id)o.updateGoal(t);else{var a=o.userId;o.addGoal(a,t)}n.close()}}],controllerAs:"vm",size:"lg"})},o.updateGoal=function(t){var n=t.id;if(t.goal)var a={id:t.id,goal:t.goal,goal_target_date:t.goal_target_date,goal_complete:t.goal_complete,goal_notes:t.goal_notes};else{var a=t,r=o.getDate();a.goal_complete_date=r.now}e.updateStudentGoal(n,a).then(function(e){var n=o.goals.indexOf(t);o.goals[n]=e}).catch(function(t){console.log(t)})},o.getDate=function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,a=t.getFullYear(),o=t.getHours(),r=t.getMinutes(),i=t.getSeconds(),s=a+"-"+n+"-"+e+"T"+o+":"+r+":"+i;return{today:t,dd:e,mm:n,yyyy:a,hh:o,m:r,secs:i,now:s}},o.addGoal=function(t,n){n.student=t,e.createStudentGoal(n).then(function(t){o.goals.push(t)}).catch(function(t){console.log(t)})},o.deleteGoal=function(t){var n=t.id;e.deleteStudentGoal(n).then(function(e){var n=o.goals.indexOf(t);o.goals.splice(n,1)}).catch(function(t){console.log(t)})},o.checkGoals=function(){o.$watch("goals",function(t){if(t){var e=new Date,a=new Date;a.setDate(a.getDate()+7);var o=n.getAuthAcct();if(o.notification.goal){var i=!1;if(o.notification.goal_time>a)var i=!0}if(i||!o.notification.goal){var s;if(angular.forEach(t,function(t,e){t.goal_target_date&&!t.goal_complete&&(s?t.goal_target_date<s&&(s=t.goal_target_date):s=t.goal_target_date)}),s){var c=new Date;c.setDate(c.getDate()+7);var u=new Date(s);e>u?$.notify({icon:"ti-medall",message:"You have Goals that are past the Target Date!"},{type:"danger",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}):c>u&&$.notify({icon:"ti-medall",message:"You have Goals that are approaching Target Date!"},{type:"warning",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}),o.notification={goal:!0,goal_time:e},r.putObject("authAcct",o)}}}},!0)},o.checkGoals()},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-goal-"+n.tempType+".directive.html"))}};return i}angular.module("main.directives").directive("studentGoal",t),t.$inject=["$sce","Users","Main","$uibModal","$timeout","$cookies"]}(),function(){"use strict";function t(t){var e={restrict:"EA",scope:{labels:"=",filterLabels:"="},link:function(t,e,n){function a(){angular.forEach(t.labels,function(e,n){_.some(t.allLabels,function(t){return t.id==e.id})||t.allLabels.push(e)})}t.allLabels=[],t.addLabel=function(e){t.filterLabels.push(e.label_name)},t.removeLabel=function(e){t.filterLabels.splice(e,1)},t.$watch("labels",function(t,e){t&&a()},!0)},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-label-display.directive.html"))}};return e}angular.module("main.directives").directive("studentLabelDisplay",t),t.$inject=["$sce"]}(),function(){"use strict";function t(t,e){var n={restrict:"EA",scope:{itemLabel:"="},link:function(t,n,a){function o(){e.getAllLabels().then(r).catch(function(t){console.log(t)})}function r(e){t.allLabels=e}t.createLabel=function(t){var e={label_name:t,label_new:!0};return e},t.addLabel=function(e){delete e.$$hashKey,delete e.isTag,t.itemLabel.push(e)},t.removeLabel=function(e){var n=t.itemLabel.indexOf(e);t.itemLabel.splice(n,1)},o()},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-label.directive.html"))}};return n}angular.module("main.directives").directive("studentLabel",t),t.$inject=["$sce","Users"]}(),function(){"use strict";function t(t,e,n,a){var o={restrict:"EA",scope:{tempType:"=",userId:"=",playLevelColor:"=",path:"="},link:function(t,e,o){function r(){n.getUserLeaderBoard().then(s).catch(c),t.getRange("all")}function i(t,e){_.findWhere(e,{id:parseInt(t)})}function s(e){t.allUsers=e,i(t.userId,t.allUsers),t.leaderUsers=angular.copy(e),t.setLeaderboard(t.leaderUsers),u(t.allUsers.length),t.loading=!1}function c(t){console.log(t)}function u(e){t.pageSet={viewby:"10",totalItems:e,currentPage:1,itemsPerPage:"10",maxSize:5}}t.loading=!0,t.showInactive="",t.lb={searchItem:""},t.setItemsPerPage=function(e){t.pageSet.itemsPerPage=e,t.pageSet.currentPage=1},t.dateRange=moment("12-25-1995","MM-DD-YYYY"),t.setLeaderboard=function(e){if(t.tempLeaderBoard=[],angular.forEach(e,function(e,n){if(e.student_log.length)if(e.student_log=_.filter(e.student_log,function(e){if(e.practice_date)return moment(e.practice_date).isAfter(t.dateRange)}),e.student_log.length)var a=t.getSum(e.student_log);else var a={max_speed:0,speed_total:0,speed_avg:0,time_total:0,time_avg:0,last_practice:"no practice"};else var a={max_speed:0,speed_total:0,speed_avg:0,time_total:0,time_avg:0,last_practice:"no practice"};if(e.student_goal.length)if(e.student_goal=_.filter(e.student_goal,function(e){return moment(e.goal_complete_date).isAfter(t.dateRange)}),e.student_goal.length)var o=_.where(e.student_goal,{goal_complete:!0}).length;else var o=0;else var o=0;if(e.student_objective.length)if(e.student_objective=_.filter(e.student_objective,function(e){return moment(e.objective_complete_date).isAfter(t.dateRange)}),e.student_objective.length)var r=_.where(e.student_objective,{objective_complete:!0}).length;else var r=0;else var r=0;if(e.student_wishlist.length)if(e.student_wishlist=_.filter(e.student_wishlist,function(e){return moment(e.wish_item_complete_date).isAfter(t.dateRange)}),e.student_wishlist.length)var i=_.where(e.student_wishlist,{wish_item_complete:!0}).length;else var i=0;else var i=0;var s={id:e.id,is_active:e.is_active,first_name:e.first_name,last_name:e.last_name,play_level:e.play_level,practice_speed_high:a.max_speed,practice_speed_avg:a.speed_avg,practice_speed_total:a.speed_total,practice_time_avg:a.time_avg,practice_time_total:a.time_total,practice_count:e.student_log.length,last_practice_date:a.last_practice,goals_complete:o,objectives_complete:r,wishes_complete:i};t.tempLeaderBoard.push(s),t.userId===s.id&&(t.leaderBoardUser=s)}),t.leaderBoard=_.sortBy(t.tempLeaderBoard,"practice_time_total").reverse(),t.leaderBoardUser){var n=t.leaderBoard.indexOf(t.leaderBoardUser);0===n?(t.leaderBoard[n].rank=n+1,t.leaderBoard[n+1].rank=n+2,t.leaderBoard[n+2].rank=n+3,t.dashLeader=[t.leaderBoard[n],t.leaderBoard[n+1],t.leaderBoard[n+2]]):n===t.leaderBoard.length-1?(t.leaderBoard[n-2].rank=n-1,t.leaderBoard[n-1].rank=n,t.leaderBoard[n].rank=n+1,t.dashLeader=[t.leaderBoard[n-2],t.leaderBoard[n-1],t.leaderBoard[n]]):(t.leaderBoard[n-1].rank=n,t.leaderBoard[n].rank=n+1,t.leaderBoard[n+1].rank=n+2,t.dashLeader=[t.leaderBoard[n-1],t.leaderBoard[n],t.leaderBoard[n+1]])}},t.getSum=function(t){var e=[],n=[],a=[],o=0,r="";if(angular.forEach(t,function(t,i){if(t.practice_time){var s={},c=parseInt(t.practice_time);if(e.push(c),a.length){var u=_.findWhere(a,{date:t.practice_date});u?u.tot=parseInt(u.tot)+c:(s.tot=c,s.date=t.practice_date,a.push(s))}else s.tot=c,s.date=t.practice_date,a.push(s)}if(t.practice_speed){var l=parseInt(t.practice_speed);l>o&&(o=l),n.push(l)}t.practice_date&&t.practice_date>r&&(r=t.practice_date)}),e.length)var i=e.reduce(function(t,e){return t+e});else var i=0;if(n.length)var s=n.reduce(function(t,e){return t+e});else var s=0;if(a.length){var c=0;_.each(a,function(t,e){c+=t.tot})}else var c=0;return{max_speed:o,speed_total:s,speed_avg:s/n.length,time_total:i,time_avg:c/a.length,last_practice:r}},t.resetLeaderboard=function(){t.dateRange=moment("12-25-1995","MM-DD-YYYY");var e=angular.copy(t.allUsers);t.setLeaderboard(e)},t.getRange=function(e){if(t.rangeBy=e,"all"===t.rangeBy)t.resetLeaderboard();else{t.adjDate=moment().subtract(1,e),t.dateRange=t.adjDate;var n=angular.copy(t.allUsers);t.setLeaderboard(n)}},a(function(){r()},1e3)},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-leaderboard-"+n.tempType+".directive.html"))}};return o}angular.module("main.directives").directive("studentLeaderboard",t),t.$inject=["$sce","$cookies","Users","$timeout"]}(),function(){"use strict";function t(t,e,n,a,o,r){var i={restrict:"EA",scope:{tempType:"=",userId:"=",materials:"=",path:"="},link:function(r,i,s){function c(t){angular.forEach(t,function(t,e){var n=_.findWhere(t.student_material_item,{student:r.userId});n&&!r.authAcct.is_admin&&(t.material_added=n.student_added),t.material_label.length&&angular.forEach(t.material_label,function(t,e){r.materialLabelsAll.indexOf(t)==-1&&r.materialLabelsAll.push(t)})})}function u(t){var e=r.materials.indexOf(r.mat);r.materials.splice(e,1)}r.sortType=["-material_added"],r.sortReverse=!1,r.searchItem="",r.authAcct=e.getObject("authAcct"),r.materialLabelsAll=[],r.filterLabels=[],r.open=function(e){a.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-materials.modal.html")),controller:["$scope","$uibModalInstance",function(t,a){var o=this;o.path=r.path,o.authAcct=r.authAcct,o.hasGroup=!1,o.fileProgress=r.fileProgress,e.id?(o.modalTitle="Update Material",o.newMaterial=e,e.student_group.length&&(o.hasGroup=!0,r.hasGroup=o.hasGroup)):(o.modalTitle="Add Material",o.newMaterial={},o.newMaterial.material_label=[]),r.authAcct.is_staff&&n.getAllSimpleUsers().then(function(t){o.allUsers=t}),o.closeModal=function(){a.dismiss("cancel")},o.submitMaterial=function(t){if(t.student_group){var n=!0;t.student_group.length>1&&t.student_group[0].email?t.group_student=_.pluck(_.clone(t.student_group),"id"):t.group_student=_.clone(t.student_group),t=_.omit(t,"student_group")}e.id?r.updateMaterial(t):(n?t.student=r.authAcct.id:t.student=r.userId,r.addMaterial(t)),a.close()}}],controllerAs:"vm",size:"lg"})},r.updateMaterial=function(t){var e=_.omit(t,"material_added_by","material_updated_by","student"),n=t.id,a=e;o.upload({url:"api/v1/student-materials/"+n+"/",data:a,method:"PUT"}).then(function(e){var n=r.materials.indexOf(t);r.materials[n]=e.data},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);r.fileProgress=e})},r.addMaterial=function(t){o.upload({url:"api/v1/student-materials/",data:t}).then(function(t){r.materials.push(t.data)},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);r.fileProgress=e,console.log("progress: "+e+"% "+t.config.data.file.name)})},r.deleteMaterial=function(t){var e=t.id;if(r.mat=t,t.student_group.length>1&&!r.authAcct.is_staff){var a=_.clone(t);a.group_student=_.without(_.pluck(a.student_group,"id"),r.userId),a=_.omit(a,"student_group"),r.updateMaterial(a),u()}else n.deleteStudentMaterial(e).then(u).catch(function(t){console.log(t)})},r.$watch("materials",function(t,e){t&&c(r.materials)},!0)},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-materials-"+n.tempType+".directive.html"))}};return i}angular.module("main.directives").directive("studentMaterials",t),t.$inject=["$sce","$cookies","Users","$uibModal","Upload","$timeout"]}(),function(){"use strict";function t(t,e,n){var a={restrict:"EA",scope:{tempType:"=",userId:"=",authAcct:"=",objectives:"="},link:function(a,o,r){a.sortType=["objective_complete","objective_created"],a.sortReverse=!1,a.searchItem="",a.open=function(e){n.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-objective.modal.html")),controller:["$scope","$uibModalInstance",function(t,n){var o=this;e.id?(o.modalTitle="Update Objective",o.studentObjective=e):(o.modalTitle="New Objective",o.studentObjective={}),o.closeModal=function(){n.dismiss("cancel")},o.submitObjective=function(t){if(e.id)a.updateObjective(t);else{var o=a.userId;a.addObjective(o,t)}n.close()}}],controllerAs:"vm",size:"lg"})},a.updateObjective=function(t){var n=t.id;if(t.objective)var o={id:t.id,objective:t.objective,objective_complete:t.objective_complete,objective_notes:t.objective_notes,objective_priority:t.objective_priority,objective_visible:t.objective_visible};else{var o=t,r=a.getDate();o.objective_complete_date=r.now}e.updateStudentObjective(n,o).then(function(e){var n=a.objectives.indexOf(t);a.objectives[n]=e}).catch(function(t){console.log(t)})},a.getDate=function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,a=t.getFullYear(),o=t.getHours(),r=t.getMinutes(),i=t.getSeconds(),s=a+"-"+n+"-"+e+"T"+o+":"+r+":"+i;return{today:t,dd:e,mm:n,yyyy:a,hh:o,m:r,secs:i,now:s}},a.addObjective=function(t,n){n.student=t,e.createStudentObjective(n).then(function(t){a.objectives.push(t)}).catch(function(t){console.log(t)})},a.deleteObjective=function(t){var n=t.id;e.deleteStudentObjective(n).then(function(e){var n=a.objectives.indexOf(t);a.objectives.splice(n,1)}).catch(function(t){console.log(t)})}},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-objective-"+n.tempType+".directive.html"))}};return a}angular.module("main.directives").directive("studentObjective",t),t.$inject=["$sce","Users","$uibModal"]}(),function(){"use strict";function t(t,e,n,a){var o={restrict:"EA",scope:{tempType:"=",userId:"=",practiceLogs:"=",timerVis:"="},link:function(o,r,i){o.sortType=["practice_item_created"],o.sortReverse=!1,o.searchItem="",o.open=function(e){n.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-practice.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,n,a){var r=this;e.id?(r.modalTitle="Update Practice",r.newPracticeLog=e):(r.modalTitle="New Practice",r.newPracticeLog={}),r.openDate=function(t){t.preventDefault(),t.stopPropagation(),a(function(){r.showPicker.opened=!r.showPicker.opened})},r.showPicker={opened:!1},r.closeModal=function(){n.dismiss("cancel")},r.submitNewPracticeLog=function(t){if(e.id)o.updatePracticeLog(t);else{var a=o.userId;o.addPracticeLog(a,t)}n.close()}}],controllerAs:"vm",size:"lg"})},o.updatePracticeLog=function(t){var n=_.omit(t,"practice_item_created");e.updateStudentPracticeLog(n).then(function(e){o.pracLog=_.findWhere(o.practiceLogs,{id:t.id}),o.pracLog.practice_category_display=e.practice_category_display,o.getStats()}).catch(function(t){console.log(t)})},o.addPracticeLog=function(t,n){n.student=t,e.createStudentPracticeLog(n).then(function(t){o.practiceLogs.push(t),o.getStats()}).catch(function(t){console.log(t)})},o.deletePracticeLog=function(t){var n=t.id;e.deleteStudentPracticeLog(n).then(function(e){var n=o.practiceLogs.indexOf(t);o.practiceLogs.splice(n,1),o.getStats()}).catch(function(t){console.log(t)})},o.getStats=function(){a(function(){var t=[],e=[];o.maxSpeed=0,o.practiceLogs&&o.practiceLogs.length?angular.forEach(o.practiceLogs,function(n,a){if(n.practice_time){var r=parseInt(n.practice_time);t.push(r)}if(n.practice_speed){var i=parseInt(n.practice_speed);i>o.maxSpeed&&(o.maxSpeed=i),e.push(i)}}):(t.push(0),
e.push(0)),o.sumTimes=t.reduce(function(t,e){return t+e}),o.sumSpeeds=e.reduce(function(t,e){return t+e})},1e3)},o.getStats()},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-practice-"+n.tempType+".directive.html"))}};return o}angular.module("main.directives").directive("studentPracticeLog",t),t.$inject=["$sce","Users","$uibModal","$timeout"]}(),function(){"use strict";function t(t,e,n){var a={restrict:"EA",scope:{tempType:"=",userId:"=",wishLists:"="},link:function(a,o,r){a.sortType=["wish_item_complete","wish_item_created"],a.sortReverse=!1,a.searchItem="",a.open=function(e){n.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-wishlist.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,n,o){var r=this;e.id?(r.modalTitle="Update Wish",r.newWishItem=e):(r.modalTitle="New Wish",r.newWishItem={}),r.closeModal=function(){n.dismiss("cancel")},r.submitWishItem=function(t){if(e.id)a.updateWishItem(t);else{var o=a.userId;a.addWishItem(o,t)}n.close()}}],controllerAs:"vm",size:"lg"})},a.updateWishItem=function(t){var n=t.id;if(t.wish_item)var o={id:t.id,wish_item:t.wish_item,wish_item_complete:t.wish_item_complete,wish_item_notes:t.wish_item_notes};else{var o=t,r=a.getDate();o.wish_item_complete_date=r.now}e.updateStudentWishList(n,o).then(function(e){var n=a.wishLists.indexOf(t);a.wishLists[n]=e}).catch(function(t){console.log(t)})},a.getDate=function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,a=t.getFullYear(),o=t.getHours(),r=t.getMinutes(),i=t.getSeconds(),s=a+"-"+n+"-"+e+"T"+o+":"+r+":"+i;return{today:t,dd:e,mm:n,yyyy:a,hh:o,m:r,secs:i,now:s}},a.addWishItem=function(t,n){n.student=t,e.createStudentWishList(n).then(function(t){a.wishLists.push(t)}).catch(function(t){console.log(t)})},a.deleteWishItem=function(t){var n=t.id;e.deleteStudentWishList(n).then(function(e){var n=a.wishLists.indexOf(t);a.wishLists.splice(n,1)}).catch(function(t){console.log(t)})}},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-wishlist-"+n.tempType+".directive.html"))}};return a}angular.module("main.directives").directive("studentWishList",t),t.$inject=["$sce","Users","$uibModal"]}(),function(){"use strict";function t(){return function(t,e){var n="";if(e){for(var a=parseInt(e,10),o=t.toString().length,r=0;r<a-o;r++)n="0"+n;n+=t}return n}}function e(){return function(t,e){var n=[];if(angular.isArray(t)){var a=Object.keys(e);t.forEach(function(t){for(var o=!1,r=0;r<a.length;r++){var i=a[r],s=e[i].toLowerCase();if(t[i].toString().toLowerCase().indexOf(s)!==-1){o=!0;break}}o&&n.push(t)})}else n=t;return n}}function n(){return function(t,e,n){if(e.is_admin)return n.material_added;var a=_.findWhere(n.student_material_item,{student:e.id});return a?a.student_added:n.material_added}}function a(){return function(t,e){var n=[];return e.length?(angular.forEach(t,function(t){t.material_label.length&&angular.forEach(t.material_label,function(a){_.contains(e,a.label_name,0)&&n.push(t)})}),n):t}}function o(){return function(t,e){var n=[];return e.length?(angular.forEach(t,function(t){t.note_label.length&&angular.forEach(t.note_label,function(a){_.contains(e,a.label_name,0)&&n.push(t)})}),n):t}}angular.module("main.filters").filter("numberpad",t),t.$inject=[],angular.module("main.filters").filter("propsFilter",e),e.$inject=[],angular.module("main.filters").filter("matDateFilter",n),n.$inject=[],angular.module("main.filters").filter("materialLabelFilter",a),a.$inject=[],angular.module("main.filters").filter("noteLabelFilter",o),o.$inject=[]}(),function(){"use strict";function t(t,e,n,a){function o(t){return t.data}function r(t){return e.reject(t)}function i(e,n){return t.post("api/v1/auth/login/",{username:e,password:n}).then(function(t){return m.loginToken(t.data,n)}).catch(r)}function s(e,a){return t.post("api/v1/auth/token/",{username:e.username,password:a}).then(function(t){return m.setAuthAcct(e,t.data),m.refreshToken(e),e}).catch(function(t){console.log(t),n.go("login")})}function c(e){return t.post("/api/v1/users/",e).then(o).catch(r)}function u(e){var n=a.getObject("authAcct");return t.post("api/v1/auth/refresh/",{token:n.token}).then(function(t){return m.setAuthAcct(e,t.data),!0}).catch(function(t){return console.log(t),!1})}function l(t,e){return a.putObject("authAcct",{id:t.id,is_staff:t.is_admin,is_admin:t.is_admin,notification:"",token:e.token}),!0}function d(){return a.getObject("authAcct")}function h(){if(a.getObject("authAcct")){var e=a.getObject("authAcct");return t.post("api/v1/auth/verify/",{token:e.token}).then(function(t){return!0}).catch(function(t){return console.log(t),!1})}return!1}function f(){var t=a.getObject("authAcct");return t.is_staff}function g(){return a.remove("authAcct"),t.post("api/v1/auth/logout/").then(p).catch(r)}function p(t){a.remove("authAcct"),n.go("login")}var m={login:i,logout:g,register:c,loginToken:s,refreshToken:u,setAuthAcct:l,getAuthAcct:d,isAuthAcct:h,isStaffAcct:f};return m}angular.module("main.services").factory("Main",t),t.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function t(t,e){return{request:function(t){var n=t.url.slice(0,7),a="api/v1/"===n;if(a&&!!e.getObject("authAcct")){var o=e.getObject("authAcct");t.headers.Authorization="JWT "+o.token}return t}}}angular.module("main.services").factory("tokenInterceptor",t),t.$inject=["$q","$cookies"]}(),function(){"use strict";function t(t,e,n,a,o,r,i,s,c,u,l){function d(){parseInt(h.user.user_credit)<parseInt(h.course.course_credit)?h.needCredit=!0:h.needCredit=!1,h.newClass={course_id:c.id,student_id:u.id,schedule_date:i(s.date).format("YYYY-MM-DD"),schedule_start_time:c.course_start_time,schedule_end_time:c.course_end_time,recurring:!1},"sched"==h.courseType&&_.contains(h.schedType.scheduledCourse.schedule_recurring_user,h.user.id)&&(h.newClass.recurring=!0)}var h=this;h.date=s,h.course=c,h.user=u,h.schedType=l,h.courseType=l.courseType,d(),h.getTime=function(t){return t.length<10?i("1999-12-12 "+t,"YYYY-MM-DD h:mm a").toDate():t},h.addClass=function(){"sched"==h.courseType&&(h.newClass.schedule=h.schedType.scheduledCourse.id),r.close(h.newClass,h.courseType)},h.closeModal=function(){r.dismiss("cancel")}}angular.module("schedule.controllers").controller("AddCourseController",t),t.$inject=["$scope","$sce","Main","Users","Schedule","$uibModalInstance","moment","date","course","user","schedType"]}(),function(){"use strict";function t(t,e,n,a,o,r,i,s,c){function u(){a.isAuthAcct()?(A.authAcct=a.getAuthAcct(),o.getUser(A.authAcct.id).then(function(t){A.user=t,r.getAllCourses().then(l).catch(d),r.getSchedule().then(h).catch(f)}).catch(function(t){a.logout()})):console.log("Could not get account"),A.authAcct.is_admin&&(c.showTimesOnWeekView=!0,c.displayEventEndTimes=!0,A.calendarView="month"),A.calendarDate=new Date,g()}function l(t){A.courses=t,A.courseAvail=!0,A.getCourses(A.courses)}function d(t){console.log(t)}function h(t){A.schedule=t,A.schedAvail=!0,A.user.is_admin&&A.setSchedule(t)}function f(t){console.log(t)}function g(){A.week=[];for(var t=0;t<7;t++){var e=s(A.calendarDate).add(t,"d").format("dddd").toLowerCase();A.week.push({day:e,date:s(A.calendarDate).add(t,"d").toDate()})}}function p(t){u()}function m(t){console.log(t)}function v(t){u()}function b(t){console.log(t)}var A=this;A.isCollapsed=!0,A.schedAvail=!1,A.courseAvail=!1,A.userSchedule=[],u(),A.getCourses=function(t){A.availCourses=[],angular.forEach(t,function(t,e){for(var n=0;n<7;n++){var a=s(A.calendarDate).add(n,"d").format("dddd").toLowerCase(),o=s(A.calendarDate).add(n,"d").format("YYYY-MM-DD");if(1==_.propertyOf(t)(a)&&A.checkStudent(A.user,t)){if(t.course_location)var r=t.course_location.name;else var r="no location set";A.availCourses.push({day:a,date:s(A.calendarDate).add(n,"d").toDate(),start:s(o+"T"+t.course_start_time).toDate(),end:s(o+"T"+t.course_end_time).toDate(),course:t}),A.userSchedule.push({title:t.course_title+" - "+r,type:"info",startsAt:s(o+"T"+t.course_start_time).toDate(),endsAt:s(o+"T"+t.course_end_time).toDate(),editable:!0,deletable:!0,draggable:!1,resizable:!1,incrementsBadgeTotal:!0,course:t})}}})},A.checkStudent=function(t,e){if(A.user.is_admin)return!0;var n=t.play_level_display.toLowerCase(),a=s().diff(s(t.date_of_birth,"YYYYMMDD"),"years");if(t.student_log.length>0)var o=_.pluck(t.student_log,"practice_time"),r=o.reduce(function(t,e){return parseInt(t)+parseInt(e)});else var r=0;return!!(_.propertyOf(e)(n)&&a>=e.course_age_min&&a<=e.course_age_max&&r>=parseInt(e.practice_min))},A.setSchedule=function(t){angular.forEach(t,function(t,e){if(t.course.course_location)var n=t.course.course_location.name;else var n="no location set";var a={title:t.course.course_title+" - "+n,type:"success",startsAt:s(t.schedule_date+"T"+t.schedule_start_time).toDate(),endsAt:s(t.schedule_date+"T"+t.schedule_end_time).toDate(),editable:!0,deletable:!0,draggable:!1,resizable:!1,incrementsBadgeTotal:!0,schedule:t};A.userSchedule.push(a)})},A.addCourse=function(t){r.addCourse(t).then(p).catch(m)},A.removeCourse=function(t){r.removeCourse(t).then(v).catch(b)},A.checkDate=function(t,e){var n=s(t).format("YYYY-MM-DD"),a=s(e).format("YYYY-MM-DD");return n===a},A.isDay=function(t){return!(s(t)<s(A.calendarDate).add(10,"m"))},A.checkMax=function(t){angular.forEach(A.schedule,function(e,n){var a=s(t.date).format("YYYY-MM-DD");if(t.course.id==e.course.id&&s(a+"T"+t.course.course_start_time).toDate()==s(e.schedule_date+"T"+e.schedule_start_time).toDate())return parseInt(t.course.max_student)>parseInt(e.student.length)})},A.getTime=function(t){return s("1999-12-12T"+t).format("h:mm a")},A.eventClicked=function(t){if(t.course)var e=t.course,n="new",a="";else if(t.schedule)var e=t.schedule.course,n="sched",a=t.schedule;A.open({date:t.startsAt,courseStart:s(t.startsAt).format("h:mm a"),courseEnd:s(t.endsAt).format("h:mm a")},e,A.user,{courseType:n,scheduledCourse:a})},A.open=function(t,n,a,o){var r=i.open({animation:!0,templateUrl:e.trustAsResourceUrl(static_path("views/modals/add-course.modal.html")),controller:"AddCourseController",controllerAs:"vm",size:"lg",resolve:{date:t,course:n,user:a,schedType:o}});r.result.then(function(t){t.schedule?A.removeCourse(t):A.addCourse(t)})}}angular.module("schedule.controllers").controller("ScheduleController",t),t.$inject=["$scope","$sce","$state","Main","Users","Schedule","$uibModal","moment","calendarConfig"]}(),function(){"use strict";function t(t,e,n,a){function o(t){return t.data}function r(t){return e.reject("Error "+t.status)}function i(){return t.get("api/v1/courses/").then(o).catch(r)}function s(){return t.get("api/v1/course-schedule/").then(o).catch(r)}function c(e){return t.post("api/v1/course-schedule/",e).then(o).catch(r)}function u(e){return t.put("api/v1/course-schedule-remove/"+e.schedule+"/",e).then(o).catch(r)}var l=this;l.acct=a.getObject("authAcct");var d={getAllCourses:i,getSchedule:s,addCourse:c,removeCourse:u};return d}angular.module("schedule.services").factory("Schedule",t),t.$inject=["$http","$q","$state","$cookies"]}(),function(){"use static";function t(t,e,n,a,o){function r(){a.isAuthAcct()?(u.authAcct=a.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-goal",{userId:u.dashId},{notify:!1})),i(u.dashId)):e.go("login")}function i(t){o.getUser(t).then(s).catch(c)}function s(t){u.user=t}function c(t){console.log(t),a.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentGoalController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function t(t,e,n,a,o){function r(){a.isAuthAcct()?(u.authAcct=a.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-materials",{userId:u.dashId},{notify:!1})),i(u.dashId)):e.go("login")}function i(t){o.getUser(t).then(s).catch(c)}function s(t){u.user=t}function c(t){console.log(t),a.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentMaterialsController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function t(t,e,n,a,o){function r(){a.isAuthAcct()?(u.authAcct=a.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-objective",{userId:u.dashId},{notify:!1})),i(u.dashId)):e.go("login")}function i(t){o.getUser(t).then(s).catch(c)}function s(t){u.user=t}function c(t){console.log(t),a.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentObjectiveController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function t(t,e,n,a,o){function r(){a.isAuthAcct()?(u.authAcct=a.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-practice",{userId:u.dashId},{notify:!1})),i(u.dashId)):e.go("login")}function i(t){o.getUser(t).then(s).catch(c)}function s(t){u.user=t}function c(t){console.log(t),a.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentPracticeController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function t(t,e,n,a,o){function r(){a.isAuthAcct()?(u.authAcct=a.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-wishlist",{userId:u.dashId},{notify:!1})),i(u.dashId)):e.go("login")}function i(t){o.getUser(t).then(s).catch(c)}function s(t){u.user=t}function c(t){console.log(t),a.logout()}var u=this;r()}angular.module("main.controllers").controller("StudentWishListController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function t(t,e,n,a,o,r){function i(){a.isAuthAcct()?(d.authAcct=a.getAuthAcct(),n.userId&&d.authAcct.is_staff?(d.profId=n.userId,o.getLocations().then(function(t){d.locations=t})):(d.profId=d.authAcct.id,e.transitionTo("app.profile",{userId:d.profId},{notify:!1})),s(d.profId)):e.go("app.dashboard")}function s(t){o.getUser(t).then(c).catch(u)}function c(t){d.respUser=t;var e=angular.copy(d.respUser);d.user=_.omit(e,"student_goal","student_log","student_material","student_wishlist","student_objective"),l(d.user.student_note)}function u(t){console.log(t),a.logout()}function l(t){t.length&&angular.forEach(t,function(t,e){t.note_label.length&&angular.forEach(t.note_label,function(t,e){d.noteLabels.indexOf(t)==-1&&d.noteLabels.push(t)})})}var d=this;d.dateReg=/^(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,d.noteLabels=[],d.filterLabels=[],d.updateProfile=function(e){r.upload({url:"api/v1/users/"+e.id+"/",data:e,method:"PUT",headers:{Authorization:"JWT "+d.authAcct.token}}).then(function(e){c(e.data),t.userProfileForm.$setPristine(),t.$emit("update_user_info",e.data)},function(t){console.log("Error status: "+t.status)})},d.clearChanges=function(){d.user={},d.user=angular.copy(d.respUser)},d.deleteNote=function(t){o.deleteStudentNote(t.id).then(function(e){var n=d.user.student_note.indexOf(t);d.user.student_note.splice(n,1)}).catch(function(t){console.log(t)})},i()}angular.module("main.controllers").controller("UserProfileController",t),t.$inject=["$scope","$state","$stateParams","Main","Users","Upload"]}(),function(){"use strict";function t(t,e,n,a){var o={restrict:"EA",scope:{user:"=",note:"="},link:function(n,o,r){function i(t){n.user.student_note.push(t)}function s(t){console.log(t)}o.on("click",function(){a.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/user-note.modal.html")),controller:["$scope","$uibModalInstance",function(t,e){var a=this;a.user=n.user,a.note={},a.note.note_label=[],n.note&&(a.note=n.note),a.closeModal=function(){a.note={},e.dismiss("cancel")},a.addNote=function(t){t.student=a.user.id,e.close(),n.postNote(t)},a.editNote=function(t){e.close(),n.updateNote(t)}}],controllerAs:"vm",size:"md"})}),n.postNote=function(t){e.createStudentNote(t).then(i).catch(s)},n.updateNote=function(t){e.updateStudentNote(t.id,t).then(function(e){var a=n.user.student_note.indexOf(t);n.user.student_note[a]=e}).catch(s)}}};return o}angular.module("users.directives").directive("userNote",t),t.$inject=["$sce","Users","Main","$uibModal"]}(),function(){"use strict";function t(t,e,n,a){function o(t){return t.data}function r(t){return e.reject("Error "+t.status)}function i(){var e=a.getObject("authAcct");return t.get("api/v1/users/",{Authorization:"JWT "+e.token}).then(o).catch(r)}function s(e){var n=a.getObject("authAcct");return t.get("api/v1/users/"+e+"/",{Authorization:"JWT "+n.token}).then(o).catch(r)}function c(){var e=a.getObject("authAcct");return t.get("api/v1/users-simple/",{Authorization:"JWT "+e.token}).then(o).catch(r)}function u(){var e=a.getObject("authAcct");return t.get("api/v1/users-leaderboard/",{Authorization:"JWT "+e.token}).then(o).catch(r)}function l(){var e=a.getObject("authAcct");return t.get("api/v1/locations/",{Authorization:"JWT "+e.token}).then(o).catch(r)}function d(){var e=a.getObject("authAcct");return t.get("api/v1/student-label/",{Authorization:"JWT "+e.token}).then(o).catch(r)}function h(e){var n=a.getObject("authAcct");return t.put("api/v1/users/"+e.id+"/",e,{Authorization:"JWT "+n.token}).then(o).catch(r)}function f(e){var n=a.getObject("authAcct");return t.post("api/v1/student-goals/",e,{Authorization:"JWT "+n.token}).then(o).catch(r)}function g(e,n){var i=a.getObject("authAcct");return t.put("api/v1/student-goals/"+e+"/",n,{Authorization:"JWT "+i.token}).then(o).catch(r)}function p(e){var n=a.getObject("authAcct");return t.delete("api/v1/student-goals/"+e+"/",{Authorization:"JWT "+n.token}).then(o).catch(r)}function m(e){var n=a.getObject("authAcct");return t.post("api/v1/student-objectives/",e,{Authorization:"JWT "+n.token}).then(o).catch(r)}function v(e,n){var i=a.getObject("authAcct");return t.put("api/v1/student-objectives/"+e+"/",n,{Authorization:"JWT "+i.token}).then(o).catch(r)}function _(e){var n=a.getObject("authAcct");return t.delete("api/v1/student-objectives/"+e+"/",{Authorization:"JWT "+n.token}).then(o).catch(r)}function b(e){var n=a.getObject("authAcct");return t.post("api/v1/student-practice-logs/",e,{Authorization:"JWT "+n.token}).then(o).catch(r)}function A(e){var n=a.getObject("authAcct");return t.put("api/v1/student-practice-logs/"+e.id+"/",e,{Authorization:"JWT "+n.token}).then(o).catch(r)}function $(e){var n=a.getObject("authAcct");return t.delete("api/v1/student-practice-logs/"+e+"/",{Authorization:"JWT "+n.token}).then(o).catch(r)}function w(e){var n=a.getObject("authAcct");return t.post("api/v1/student-wish-list/",e,{Authorization:"JWT "+n.token}).then(o).catch(r)}function y(e,n){var i=a.getObject("authAcct");return t.put("api/v1/student-wish-list/"+e+"/",n,{Authorization:"JWT "+i.token}).then(o).catch(r)}function j(e){var n=a.getObject("authAcct");return t.delete("api/v1/student-wish-list/"+e+"/",{Authorization:"JWT "+n.token}).then(o).catch(r)}function I(e){var n=a.getObject("authAcct");return t.post("api/v1/student-materials/",e,{Authorization:"JWT "+n.token}).then(o).catch(r)}function T(e,n){var i=a.getObject("authAcct");return t.put("api/v1/student-materials/"+e+"/",n,{Authorization:"JWT "+i.token}).then(o).catch(r)}function U(e){var n=a.getObject("authAcct");return t.delete("api/v1/student-materials/"+e+"/",{Authorization:"JWT "+n.token}).then(o).catch(r)}function k(e){var n=a.getObject("authAcct");return t.post("api/v1/student-notes/",e,{Authorization:"JWT "+n.token}).then(o).catch(r)}function L(e,n){var i=a.getObject("authAcct");return t.put("api/v1/student-notes/"+e+"/",n,{Authorization:"JWT "+i.token}).then(o).catch(r)}function C(e){var n=a.getObject("authAcct");return t.delete("api/v1/student-notes/"+e+"/",{Authorization:"JWT "+n.token}).then(o).catch(r)}var M={getAll:i,getUser:s,getAllSimpleUsers:c,getUserLeaderBoard:u,getLocations:l,getAllLabels:d,updateUserProfile:h,createStudentGoal:f,updateStudentGoal:g,deleteStudentGoal:p,createStudentObjective:m,updateStudentObjective:v,deleteStudentObjective:_,createStudentPracticeLog:b,updateStudentPracticeLog:A,deleteStudentPracticeLog:$,createStudentWishList:w,updateStudentWishList:y,deleteStudentWishList:j,createStudentMaterial:I,updateStudentMaterial:T,deleteStudentMaterial:U,createStudentNote:k,updateStudentNote:L,deleteStudentNote:C};return M}angular.module("users.services").factory("Users",t),t.$inject=["$http","$q","$state","$cookies"]}();